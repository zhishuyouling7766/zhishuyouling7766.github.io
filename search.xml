<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Android åº”ç”¨å‘å¸ƒç­¾å Keystore æ–‡ä»¶ç”Ÿæˆè®°å½•</title>
    <url>/2025/03/02/Android_Keystore_%E7%94%9F%E6%88%90%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<blockquote>
<p>åœ¨ Android ç³»ç»Ÿä¸­ï¼Œæ¯ä¸€ä¸ª APK å¿…é¡»ä½¿ç”¨ä¸€ä¸ªæœ‰æ•ˆçš„ç­¾åå¯†é’¥ï¼ˆKeystoreï¼‰è¿›è¡Œç­¾åï¼Œç³»ç»Ÿæ‰å…è®¸å…¶å®‰è£…ä¸è¿è¡Œã€‚å¯¹äº Qt å¼€å‘çš„ Android åº”ç”¨ï¼Œç”Ÿæˆå¹¶é…ç½® <code>.keystore</code> æ˜¯å‘å¸ƒé˜¶æ®µçš„å¿…è¦æ­¥éª¤ã€‚</p>
</blockquote>
<hr>
<h2 id="ğŸ“Œ-ä¸€ã€Keystore-çš„ä½œç”¨"><a href="#ğŸ“Œ-ä¸€ã€Keystore-çš„ä½œç”¨" class="headerlink" title="ğŸ“Œ ä¸€ã€Keystore çš„ä½œç”¨"></a>ğŸ“Œ ä¸€ã€Keystore çš„ä½œç”¨</h2><ul>
<li>ğŸ” <strong>èº«ä»½è®¤è¯</strong>ï¼šç­¾åè¡¨æ˜è¿™ä¸ª APK æ¥è‡ªä½ è¿™ä¸ªå¼€å‘è€…ã€‚</li>
<li>ğŸ“¦ <strong>åº”ç”¨å‡çº§ç»‘å®š</strong>ï¼šä»¥åè¯¥åº”ç”¨çš„æ‰€æœ‰ç‰ˆæœ¬å¿…é¡»ä½¿ç”¨åŒä¸€ä¸ª keystore ç­¾åï¼Œå¦åˆ™æ— æ³•è¦†ç›–å®‰è£…ã€‚</li>
<li>ğŸª <strong>åº”ç”¨å•†åº—è¦æ±‚</strong>ï¼šå¦‚ Google Playã€åä¸ºåº”ç”¨å¸‚åœºç­‰ï¼Œå‡å¼ºåˆ¶è¦æ±‚ Release APK å¿…é¡»ç­¾åã€‚</li>
</ul>
<hr>
<h2 id="ğŸ§ª-äºŒã€éªŒè¯ç³»ç»Ÿæ˜¯å¦å·²å®‰è£…-JDK-å’Œ-keytool"><a href="#ğŸ§ª-äºŒã€éªŒè¯ç³»ç»Ÿæ˜¯å¦å·²å®‰è£…-JDK-å’Œ-keytool" class="headerlink" title="ğŸ§ª äºŒã€éªŒè¯ç³»ç»Ÿæ˜¯å¦å·²å®‰è£… JDK å’Œ keytool"></a>ğŸ§ª äºŒã€éªŒè¯ç³»ç»Ÿæ˜¯å¦å·²å®‰è£… JDK å’Œ keytool</h2><p>æ‰“å¼€å‘½ä»¤è¡Œï¼ˆCMD æˆ– PowerShellï¼‰ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">java -version</span><br><span class="line">keytool -<span class="built_in">help</span></span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç¤ºä¾‹ï¼š</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">java version &quot;1.8.0_331&quot;</span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_331-b09)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.331-b09, mixed mode)</span><br><span class="line"></span><br><span class="line">keytool é€‰é¡¹:</span><br><span class="line">-certreq  ç”Ÿæˆè¯ä¹¦ç­¾åè¯·æ±‚ (CSR)</span><br><span class="line">-genkey    ç”Ÿæˆå¯†é’¥å¯¹</span><br><span class="line">-help      æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>å¦‚æœ <code>keytool</code> æ— æ³•è¯†åˆ«ï¼Œè¯·ç¡®è®¤ JDK å®‰è£…è·¯å¾„æ˜¯å¦å·²åŠ å…¥ç¯å¢ƒå˜é‡çš„ Path ä¸­ã€‚</p>
<hr>
<h2 id="ğŸ§©-ä¸‰ã€Keystore-ç”Ÿæˆå‘½ä»¤"><a href="#ğŸ§©-ä¸‰ã€Keystore-ç”Ÿæˆå‘½ä»¤" class="headerlink" title="ğŸ§© ä¸‰ã€Keystore ç”Ÿæˆå‘½ä»¤"></a>ğŸ§© ä¸‰ã€Keystore ç”Ÿæˆå‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">keytool -genkey -v -keystore my-release-key.keystore -<span class="built_in">alias</span> my-key-alias -keyalg RSA -keysize 2048 -validity 10000</span><br></pre></td></tr></table></figure>

<h3 id="å‚æ•°è¯´æ˜"><a href="#å‚æ•°è¯´æ˜" class="headerlink" title="å‚æ•°è¯´æ˜"></a>å‚æ•°è¯´æ˜</h3><table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td><code>-genkey</code></td>
<td>è¡¨ç¤ºç”Ÿæˆå¯†é’¥å¯¹ï¼ˆkey pairï¼‰</td>
</tr>
<tr>
<td><code>-v</code></td>
<td>è¾“å‡ºè¯¦ç»†ä¿¡æ¯</td>
</tr>
<tr>
<td><code>-keystore</code></td>
<td>æŒ‡å®šè¾“å‡ºçš„ keystore æ–‡ä»¶å</td>
</tr>
<tr>
<td><code>-alias</code></td>
<td>ä¸ºå¯†é’¥è®¾ç½®ä¸€ä¸ªåˆ«å</td>
</tr>
<tr>
<td><code>-keyalg RSA</code></td>
<td>ä½¿ç”¨ RSA åŠ å¯†ç®—æ³•ç”Ÿæˆå¯†é’¥</td>
</tr>
<tr>
<td><code>-keysize 2048</code></td>
<td>å¯†é’¥é•¿åº¦ä¸º 2048 ä½</td>
</tr>
<tr>
<td><code>-validity 10000</code></td>
<td>å¯†é’¥æœ‰æ•ˆæœŸä¸º 10000 å¤©ï¼ˆçº¦ 27 å¹´ï¼‰</td>
</tr>
</tbody></table>
<hr>
<h2 id="ğŸ›¡ï¸-å››ã€æ‰§è¡Œåæç¤ºå¡«å†™ä¿¡æ¯"><a href="#ğŸ›¡ï¸-å››ã€æ‰§è¡Œåæç¤ºå¡«å†™ä¿¡æ¯" class="headerlink" title="ğŸ›¡ï¸ å››ã€æ‰§è¡Œåæç¤ºå¡«å†™ä¿¡æ¯"></a>ğŸ›¡ï¸ å››ã€æ‰§è¡Œåæç¤ºå¡«å†™ä¿¡æ¯</h2><p>ä¾æ¬¡è¾“å…¥ä»¥ä¸‹ä¿¡æ¯ï¼š</p>
<ol>
<li>å¯†é’¥åº“å£ä»¤ï¼ˆkeystore passwordï¼‰</li>
<li>å§“åï¼ˆYour first and last nameï¼‰</li>
<li>ç»„ç»‡å•ä½åï¼ˆOrganizational unitï¼‰</li>
<li>ç»„ç»‡åï¼ˆOrganizationï¼‰</li>
<li>åŸå¸‚åï¼ˆCity or Localityï¼‰</li>
<li>çœä»½åï¼ˆState or Provinceï¼‰</li>
<li>å›½å®¶ä»£ç ï¼ˆCountry Codeï¼Œå¦‚ <code>CN</code>ï¼‰</li>
<li>ç¡®è®¤ä¿¡æ¯æ˜¯å¦æ­£ç¡®ï¼ˆè¾“å…¥ <code>æ˜¯</code> æˆ– <code>yes</code>ï¼‰</li>
<li>å¯é€‰è®¾ç½®å¯†é’¥å£ä»¤ï¼ˆä¸ keystore ç›¸åŒå¯ç›´æ¥å›è½¦ï¼‰</li>
</ol>
<hr>
<h2 id="âœ…-äº”ã€æˆåŠŸç»“æœ"><a href="#âœ…-äº”ã€æˆåŠŸç»“æœ" class="headerlink" title="âœ… äº”ã€æˆåŠŸç»“æœ"></a>âœ… äº”ã€æˆåŠŸç»“æœ</h2><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">[æ­£åœ¨ç”Ÿæˆ 2048 ä½ RSA å¯†é’¥å¯¹ï¼Œè¯ä¹¦é‡‡ç”¨ SHA256withRSAï¼ˆæœ‰æ•ˆæœŸä¸º 10000 å¤©ï¼‰]</span><br><span class="line">[å·²å°†å¯†é’¥åº“ä¿å­˜åˆ° my-release-key.keystore]</span><br></pre></td></tr></table></figure>

<p>ä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆç­¾åæ–‡ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">my-release-key.keystore</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ§©-å…­ã€åœ¨-Qt-Creator-ä¸­é…ç½®ç­¾å"><a href="#ğŸ§©-å…­ã€åœ¨-Qt-Creator-ä¸­é…ç½®ç­¾å" class="headerlink" title="ğŸ§© å…­ã€åœ¨ Qt Creator ä¸­é…ç½®ç­¾å"></a>ğŸ§© å…­ã€åœ¨ Qt Creator ä¸­é…ç½®ç­¾å</h2><p>åœ¨ã€Œé¡¹ç›® â†’ æ„å»ºä¸è¿è¡Œ â†’ Androidã€ä¸­è®¾ç½®ï¼š</p>
<ul>
<li>Keystore è·¯å¾„ï¼š<code>my-release-key.keystore</code></li>
<li>Store passwordï¼šåˆšè¾“å…¥çš„å¯†é’¥åº“å£ä»¤</li>
<li>Key aliasï¼š<code>my-key-alias</code></li>
<li>Key passwordï¼šä¸å¯†é’¥åº“å£ä»¤ä¸€è‡´æˆ–å¦è®¾</li>
</ul>
<hr>
<h2 id="âš ï¸-ä¸ƒã€å¯é€‰å»ºè®®ï¼šè½¬ä¸º-PKCS12-æ ¼å¼ï¼ˆå®˜æ–¹å»ºè®®ï¼‰"><a href="#âš ï¸-ä¸ƒã€å¯é€‰å»ºè®®ï¼šè½¬ä¸º-PKCS12-æ ¼å¼ï¼ˆå®˜æ–¹å»ºè®®ï¼‰" class="headerlink" title="âš ï¸ ä¸ƒã€å¯é€‰å»ºè®®ï¼šè½¬ä¸º PKCS12 æ ¼å¼ï¼ˆå®˜æ–¹å»ºè®®ï¼‰"></a>âš ï¸ ä¸ƒã€å¯é€‰å»ºè®®ï¼šè½¬ä¸º PKCS12 æ ¼å¼ï¼ˆå®˜æ–¹å»ºè®®ï¼‰</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">keytool -importkeystore -srckeystore my-release-key.keystore -destkeystore my-release-key.keystore -deststoretype pkcs12</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ“-å…«ã€Keystore-æ–‡ä»¶ä¿å­˜å»ºè®®"><a href="#ğŸ“-å…«ã€Keystore-æ–‡ä»¶ä¿å­˜å»ºè®®" class="headerlink" title="ğŸ“ å…«ã€Keystore æ–‡ä»¶ä¿å­˜å»ºè®®"></a>ğŸ“ å…«ã€Keystore æ–‡ä»¶ä¿å­˜å»ºè®®</h2><p>å»ºè®®å°† keystore æ–‡ä»¶ç»Ÿä¸€ä¿å­˜è‡³é¡¹ç›®ç›®å½•å¤–å®‰å…¨ä½ç½®ï¼Œ</p>
<p>å¹¶å¤‡ä»½åˆ°ç§å¯†ç½‘ç›˜æˆ–åŠ å¯†å­˜å‚¨è®¾å¤‡ï¼Œé˜²æ­¢ä¸¢å¤±ã€‚</p>
<hr>
<p>ç”Ÿæˆæ—¥æœŸï¼š2025-07-21</p>
]]></content>
      <categories>
        <category>æ•™ç¨‹</category>
      </categories>
      <tags>
        <tag>QT for Android</tag>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>GitHub é¡¹ç›®åˆ›å»ºä¸æœ¬åœ°åŒæ­¥ç®¡ç†</title>
    <url>/2025/02/18/GitHub%E9%A1%B9%E7%9B%AE%E5%88%9B%E5%BB%BA%E4%B8%8E%E7%AE%A1%E7%90%86/</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æ–‡è®°å½•å¦‚ä½•å°†åˆ›å»º GitHub ä»“åº“ï¼Œå¹¶è¿›è¡Œæœ¬åœ°åŒæ­¥ä¸ç®¡ç†ã€‚</p>
</blockquote>
<hr>
<h2 id="ğŸ”§-å‡†å¤‡å·¥å…·"><a href="#ğŸ”§-å‡†å¤‡å·¥å…·" class="headerlink" title="ğŸ”§ å‡†å¤‡å·¥å…·"></a>ğŸ”§ å‡†å¤‡å·¥å…·</h2><p>åœ¨å¼€å§‹å‰ï¼Œè¯·ç¡®è®¤ä½ å·²å…·å¤‡ä»¥ä¸‹å·¥å…·ç¯å¢ƒï¼š</p>
<ul>
<li><p>âœ… å·²æ³¨å†Œ <a href="https://github.com/">GitHub</a> è´¦å·</p>
</li>
<li><p>âœ… å·²å®‰è£… Git å·¥å…·ï¼ˆæ¨èå®‰è£… <a href="https://git-scm.com/download/win">Git for Windows</a>ï¼‰</p>
</li>
<li><p>âœ… å·²å®‰è£… nodejsï¼ˆæ¨èå®‰è£… <a href="https://nodejs.org/en/">nodejs</a>ï¼‰(<a href="https://www.cnblogs.com/liuqiyun/p/8133904.html">Node.jså®‰è£…åŠç¯å¢ƒé…ç½®ä¹‹Windowsç¯‡</a>)</p>
</li>
<li><p>âœ… ç®¡ç†å‘˜è¿è¡Œcmdï¼Œä¾æ¬¡è¾“å…¥,å®Œæˆç¯å¢ƒéªŒè¯</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">node -v</span><br><span class="line">npm -vï¼ˆnodeå®‰è£…åé™„å¸¦ï¼‰</span><br><span class="line">git -v</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h2 id="ä¸€ã€GitHub-åˆ›å»ºæ–°ä»“åº“"><a href="#ä¸€ã€GitHub-åˆ›å»ºæ–°ä»“åº“" class="headerlink" title="ä¸€ã€GitHub åˆ›å»ºæ–°ä»“åº“"></a>ä¸€ã€GitHub åˆ›å»ºæ–°ä»“åº“</h2><ol>
<li><p>ç™»å½• <a href="https://github.com/">GitHub</a></p>
</li>
<li><p>ç‚¹å‡»å³ä¸Šè§’ â†’ <code>New repository</code></p>
</li>
<li><p>ä»“åº“åç§°å¡«ï¼š<code>myProject</code></p>
</li>
<li><p>ä¸å‹¾é€‰ <code>Initialize with a README</code>ï¼ˆä¿æŒä¸ºç©ºä»“åº“ï¼‰</p>
</li>
<li><p>åˆ›å»ºæˆåŠŸåä¼šçœ‹åˆ°ä»“åº“åœ°å€ï¼š<br><code>https://github.com/GithubUserName/myGithubProject.git</code></p>
</li>
</ol>
<hr>
<h2 id="äºŒã€æœ¬åœ°åˆå§‹åŒ–-Git-é¡¹ç›®å¹¶ä¸Šä¼ "><a href="#äºŒã€æœ¬åœ°åˆå§‹åŒ–-Git-é¡¹ç›®å¹¶ä¸Šä¼ " class="headerlink" title="äºŒã€æœ¬åœ°åˆå§‹åŒ– Git é¡¹ç›®å¹¶ä¸Šä¼ "></a>äºŒã€æœ¬åœ°åˆå§‹åŒ– Git é¡¹ç›®å¹¶ä¸Šä¼ </h2><h3 id="åœ¨-Git-Bash-æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š"><a href="#åœ¨-Git-Bash-æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š" class="headerlink" title="åœ¨ Git Bash æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š"></a>åœ¨ Git Bash æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /é¡¹ç›®æœ¬åœ°å­˜å‚¨çš„åœ°å€</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ– Git ä»“åº“</span></span><br><span class="line">git init</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»º README æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰(GitHubåˆ›å»ºæ–°ä»“åº“è‹¥å‹¾é€‰Initialize with a READMEæ— éœ€è¯¥é¡¹)</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;# myGithubProject&quot;</span> &gt;&gt; README.md</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…¨éƒ¨æ–‡ä»¶æ·»åŠ åˆ° Git ç¼“å­˜åŒº</span></span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"><span class="comment"># æäº¤åˆ°æœ¬åœ°ä»“åº“ï¼Œå¹¶ä¸ºè¯¥æ¬¡æäº¤æ·»åŠ å¤‡æ³¨</span></span><br><span class="line">git commit -m <span class="string">&quot;åˆå§‹åŒ–GitHubé¡¹ç›®&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®é»˜è®¤åˆ†æ”¯ä¸º main</span></span><br><span class="line">git branch -M main</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ è¿œç¨‹ä»“åº“åœ°å€ï¼ˆSSH æ–¹å¼ï¼‰(éœ€å…ˆä¸ºæœ¬æœºé…ç½®sshå¯†é’¥)</span></span><br><span class="line">git remote add origin git@github.com:GithubUserName/myGithubProject.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨é€åˆ° GitHubï¼ˆç¬¬ä¸€æ¬¡ï¼‰</span></span><br><span class="line">git push -u origin main</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ä¸‰ã€é…ç½®-SSH-å¯†é’¥ï¼ˆæ¨èï¼‰"><a href="#ä¸‰ã€é…ç½®-SSH-å¯†é’¥ï¼ˆæ¨èï¼‰" class="headerlink" title="ä¸‰ã€é…ç½® SSH å¯†é’¥ï¼ˆæ¨èï¼‰"></a>ä¸‰ã€é…ç½® SSH å¯†é’¥ï¼ˆæ¨èï¼‰</h2><p>é¿å…æ¯æ¬¡ push éƒ½è¾“å…¥å¯†ç ï¼Œå»ºè®®ä½¿ç”¨ SSHï¼š</p>
<h3 id="1-æ£€æŸ¥æ˜¯å¦å·²æœ‰å¯†é’¥ï¼š"><a href="#1-æ£€æŸ¥æ˜¯å¦å·²æœ‰å¯†é’¥ï¼š" class="headerlink" title="1. æ£€æŸ¥æ˜¯å¦å·²æœ‰å¯†é’¥ï¼š"></a>1. æ£€æŸ¥æ˜¯å¦å·²æœ‰å¯†é’¥ï¼š</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">ls</span> ~/.ssh</span><br></pre></td></tr></table></figure>

<p>å¦‚æœ‰ <code>id_rsa</code> å’Œ <code>id_rsa.pub</code>ï¼Œå¯è·³è¿‡ç”Ÿæˆæ­¥éª¤ã€‚</p>
<h3 id="2-ç”Ÿæˆæ–°å¯†é’¥ï¼ˆå¦‚æ— ï¼‰ï¼š"><a href="#2-ç”Ÿæˆæ–°å¯†é’¥ï¼ˆå¦‚æ— ï¼‰ï¼š" class="headerlink" title="2. ç”Ÿæˆæ–°å¯†é’¥ï¼ˆå¦‚æ— ï¼‰ï¼š"></a>2. ç”Ÿæˆæ–°å¯†é’¥ï¼ˆå¦‚æ— ï¼‰ï¼š</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;é‚®ç®±åœ°å€&quot;</span></span><br></pre></td></tr></table></figure>

<p>ä¸€è·¯å›è½¦ç”Ÿæˆã€‚</p>
<h3 id="3-æ·»åŠ åˆ°-GitHubï¼š"><a href="#3-æ·»åŠ åˆ°-GitHubï¼š" class="headerlink" title="3. æ·»åŠ åˆ° GitHubï¼š"></a>3. æ·»åŠ åˆ° GitHubï¼š</h3><ul>
<li>æ‰“å¼€ GitHub â†’ Settings â†’ SSH and GPG Keys â†’ New SSH Key</li>
<li>å°† <code>C:\Users\ç”¨æˆ·å\ .ssh/id_rsa.pub</code> å†…å®¹å¤åˆ¶ç²˜è´´è¿›å»</li>
</ul>
<h3 id="4-æµ‹è¯•è¿æ¥æ˜¯å¦æˆåŠŸï¼š"><a href="#4-æµ‹è¯•è¿æ¥æ˜¯å¦æˆåŠŸï¼š" class="headerlink" title="4. æµ‹è¯•è¿æ¥æ˜¯å¦æˆåŠŸï¼š"></a>4. æµ‹è¯•è¿æ¥æ˜¯å¦æˆåŠŸï¼š</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºæˆåŠŸå³é…ç½®å®Œæˆã€‚</p>
<hr>
<h2 id="å››ã€åç»­ä¸Šä¼ èµ„æºæµç¨‹"><a href="#å››ã€åç»­ä¸Šä¼ èµ„æºæµç¨‹" class="headerlink" title="å››ã€åç»­ä¸Šä¼ èµ„æºæµç¨‹"></a>å››ã€åç»­ä¸Šä¼ èµ„æºæµç¨‹</h2><p>æ¯æ¬¡æ›´æ–°æœ¬åœ°èµ„æºï¼Œåªéœ€æ‰§è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;æ›´æ–°è¯´æ˜&quot;</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="äº”ã€å¯é€‰ï¼šæ·»åŠ -gitignore-æ–‡ä»¶"><a href="#äº”ã€å¯é€‰ï¼šæ·»åŠ -gitignore-æ–‡ä»¶" class="headerlink" title="äº”ã€å¯é€‰ï¼šæ·»åŠ  .gitignore æ–‡ä»¶"></a>äº”ã€å¯é€‰ï¼šæ·»åŠ  .gitignore æ–‡ä»¶</h2><p>ä¸ºé¿å…ä¸Šä¼ æ— ç”¨æ–‡ä»¶ï¼Œå¯æ·»åŠ  <code>.gitignore</code> æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">*.<span class="built_in">log</span>           <span class="comment"># å¿½ç•¥æ‰€æœ‰ .log ç»“å°¾çš„æ—¥å¿—æ–‡ä»¶</span></span><br><span class="line">node_modules/   <span class="comment"># å¿½ç•¥ node_modules ç›®å½•ï¼ˆå‰ç«¯é¡¹ç›®å¸¸ç”¨ï¼‰</span></span><br><span class="line">.DS_Store       <span class="comment"># å¿½ç•¥ macOS ç³»ç»Ÿçš„ä¸´æ—¶æ–‡ä»¶</span></span><br><span class="line">Thumbs.db       <span class="comment"># å¿½ç•¥ Windows ç³»ç»Ÿç¼©ç•¥å›¾ç¼“å­˜</span></span><br><span class="line">*.tmp           <span class="comment"># å¿½ç•¥æ‰€æœ‰ .tmp ä¸´æ—¶æ–‡ä»¶</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="âœ…-å°è´´å£«"><a href="#âœ…-å°è´´å£«" class="headerlink" title="âœ… å°è´´å£«"></a>âœ… å°è´´å£«</h2><ul>
<li><p>GitHub ä¸Šæ–‡ä»¶æ¯”æœ¬åœ°å¤šæ—¶ï¼Œå…ˆæ‰§è¡Œï¼š  </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git pull --rebase origin main</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥çœ‹è¿œç¨‹ä»“åº“åœ°å€ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git remote -v</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥çœ‹æäº¤å†å²ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">log</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<p>ä»¥ä¸Šå°±æ˜¯å®Œæ•´çš„GitHubé¡¹ç›®åˆ›å»ºä¸ç®¡ç†æµç¨‹</p>
]]></content>
      <categories>
        <category>æ•™ç¨‹</category>
      </categories>
      <tags>
        <tag>Git</tag>
        <tag>GitHub</tag>
      </tags>
  </entry>
  <entry>
    <title>Qté¡¹ç›®åœ¨Androidç³»ç»Ÿç¯å¢ƒä¸‹å®ç°å¼€æœºè‡ªå¯</title>
    <url>/2025/03/04/Qt%20for%20Android%20%E5%AE%9E%E7%8E%B0%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF/</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æ–‡è®°å½•å¦‚ä½•åœ¨ Qt for Android é¡¹ç›®ä¸­ï¼Œå®ç°åº”ç”¨ <strong>éšç³»ç»Ÿå¼€æœºè‡ªåŠ¨å¯åŠ¨</strong> çš„åŠŸèƒ½ï¼Œé€‚ç”¨äºè®¾å¤‡æ§åˆ¶ã€å·¥æ§ç³»ç»Ÿç­‰å¸¸é©»åº”ç”¨åœºæ™¯ã€‚</p>
</blockquote>
<hr>
<h2 id="ğŸ§©-å®ç°æ€è·¯æ¦‚è¿°"><a href="#ğŸ§©-å®ç°æ€è·¯æ¦‚è¿°" class="headerlink" title="ğŸ§© å®ç°æ€è·¯æ¦‚è¿°"></a>ğŸ§© å®ç°æ€è·¯æ¦‚è¿°</h2><ol>
<li><strong>æ–°å»ºä¸€ä¸ª <code>BroadcastReceiver</code> ç±»</strong>ï¼Œç”¨äºç›‘å¬ç³»ç»Ÿå¼€æœºå¹¿æ’­ï¼ˆ<code>BOOT_COMPLETED</code>ï¼‰ã€‚</li>
<li><strong>æ¥æ”¶åˆ°å¹¿æ’­åï¼Œå¯åŠ¨ä¸»ç•Œé¢ <code>JBmsActivity</code></strong>ï¼Œå®ƒç»§æ‰¿è‡ª <code>QtActivity</code>ï¼Œè‡ªåŠ¨è°ƒç”¨ Qt C++ å±‚çš„ <code>main()</code> å‡½æ•°ã€‚</li>
<li><strong>åœ¨ <code>AndroidManifest.xml</code> ä¸­å£°æ˜æƒé™å’Œæ³¨å†Œå¹¿æ’­æ¥æ”¶å™¨</strong>ã€‚</li>
</ol>
<hr>
<h2 id="âœ…-æ­¥éª¤ä¸€ï¼šæ–°å»º-BootReceiver-javaï¼ˆç›‘å¬å¼€æœºå¹¿æ’­ï¼‰"><a href="#âœ…-æ­¥éª¤ä¸€ï¼šæ–°å»º-BootReceiver-javaï¼ˆç›‘å¬å¼€æœºå¹¿æ’­ï¼‰" class="headerlink" title="âœ… æ­¥éª¤ä¸€ï¼šæ–°å»º BootReceiver.javaï¼ˆç›‘å¬å¼€æœºå¹¿æ’­ï¼‰"></a>âœ… æ­¥éª¤ä¸€ï¼šæ–°å»º BootReceiver.javaï¼ˆç›‘å¬å¼€æœºå¹¿æ’­ï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.qtproject.example.activityhandler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.BroadcastReceiver;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¹¿æ’­æ¥æ”¶å™¨ç±»ï¼Œç”¨äºç›‘å¬ BOOT_COMPLETED å¹¿æ’­ï¼ˆå¼€æœºå®Œæˆï¼‰</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BootReceiver</span> <span class="keyword">extends</span> <span class="title class_">BroadcastReceiver</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯åŠ¨ Qt ä¸»ç•Œé¢ï¼ˆJBmsActivityï¼‰</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">startApp</span><span class="params">(Context context, Intent intent)</span> &#123;</span><br><span class="line">        Log.d(<span class="string">&quot;BootReceiver&quot;</span>, <span class="string">&quot;å¯åŠ¨QTåº”ç”¨&quot;</span>);</span><br><span class="line">        <span class="type">Intent</span> <span class="variable">splashIntent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(context, JBmsActivity.class);</span><br><span class="line">        splashIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); <span class="comment">// å¿…é¡»è®¾ç½®æ­¤æ ‡å¿—ï¼Œå¦åˆ™ä¼šæŠ›å¼‚å¸¸</span></span><br><span class="line">        context.startActivity(splashIntent);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¥æ”¶å¹¿æ’­äº‹ä»¶</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onReceive</span><span class="params">(Context context, Intent intent)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (Intent.ACTION_BOOT_COMPLETED.equals(intent.getAction())) &#123;</span><br><span class="line">            startApp(context, intent); <span class="comment">// æ”¶åˆ°ç³»ç»Ÿå¹¿æ’­åå¯åŠ¨åº”ç”¨</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="âœ…-æ­¥éª¤äºŒï¼šåˆ›å»º-Qt-å¯åŠ¨-Activityï¼ˆJBmsActivityï¼‰"><a href="#âœ…-æ­¥éª¤äºŒï¼šåˆ›å»º-Qt-å¯åŠ¨-Activityï¼ˆJBmsActivityï¼‰" class="headerlink" title="âœ… æ­¥éª¤äºŒï¼šåˆ›å»º Qt å¯åŠ¨ Activityï¼ˆJBmsActivityï¼‰"></a>âœ… æ­¥éª¤äºŒï¼šåˆ›å»º Qt å¯åŠ¨ Activityï¼ˆJBmsActivityï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.qtproject.example.activityhandler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.os.Build;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.net.Uri;</span><br><span class="line"><span class="keyword">import</span> android.provider.Settings;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> org.qtproject.qt5.android.bindings.QtActivity;</span><br><span class="line"></span><br><span class="line"><span class="comment">// JBmsActivity æ˜¯ Qt çš„å¯åŠ¨ Activityï¼Œç»§æ‰¿ QtActivity åä¼šè§¦å‘ Qt çš„ main()</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JBmsActivity</span> <span class="keyword">extends</span> <span class="title class_">QtActivity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">TAG</span> <span class="operator">=</span> <span class="string">&quot;JBmsActivity&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ£€æŸ¥æ˜¯å¦æ‹¥æœ‰æ‚¬æµ®çª—æƒé™ï¼ˆéƒ¨åˆ†å›½äº§ç³»ç»Ÿéœ€è¦ï¼‰</span></span><br><span class="line">        <span class="keyword">if</span> (!Settings.canDrawOverlays(<span class="built_in">this</span>)) &#123;</span><br><span class="line">            <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Settings.ACTION_MANAGE_OVERLAY_PERMISSION);</span><br><span class="line">            intent.setData(Uri.parse(<span class="string">&quot;package:&quot;</span> + getPackageName()));</span><br><span class="line">            startActivityForResult(intent, <span class="number">0</span>); <span class="comment">// è¯·æ±‚æƒé™</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        hideBottomUIMenu(); <span class="comment">// è®¾ç½®å…¨å±æ²‰æµ¸å¼æ¨¡å¼</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é¡µé¢æ¢å¤æ—¶é‡æ–°éšè—è™šæ‹ŸæŒ‰é”®</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onResume</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onResume();</span><br><span class="line">        hideBottomUIMenu();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½®æ²‰æµ¸å¼å…¨å±ï¼Œéšè—åº•éƒ¨å¯¼èˆªæ </span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">hideBottomUIMenu</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> flags;</span><br><span class="line">        <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) &#123;</span><br><span class="line">            flags = View.SYSTEM_UI_FLAG_FULLSCREEN</span><br><span class="line">                    | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION</span><br><span class="line">                    | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN</span><br><span class="line">                    | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION</span><br><span class="line">                    | View.SYSTEM_UI_FLAG_LAYOUT_STABLE</span><br><span class="line">                    | View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            flags = View.SYSTEM_UI_FLAG_HIDE_NAVIGATION</span><br><span class="line">                    | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION;</span><br><span class="line">        &#125;</span><br><span class="line">        getWindow().getDecorView().setSystemUiVisibility(flags);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¥æ”¶æƒé™ç”³è¯·ç»“æœ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onActivityResult</span><span class="params">(<span class="type">int</span> requestCode, <span class="type">int</span> resultCode, Intent data)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (requestCode == <span class="number">0</span> &amp;&amp; Settings.canDrawOverlays(<span class="built_in">this</span>)) &#123;</span><br><span class="line">            Log.i(TAG, <span class="string">&quot;æ‚¬æµ®çª—æƒé™å·²æˆæƒ&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">super</span>.onActivityResult(requestCode, resultCode, data);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="âœ…-æ­¥éª¤ä¸‰ï¼šAndroidManifest-xml-é…ç½®"><a href="#âœ…-æ­¥éª¤ä¸‰ï¼šAndroidManifest-xml-é…ç½®" class="headerlink" title="âœ… æ­¥éª¤ä¸‰ï¼šAndroidManifest.xml é…ç½®"></a>âœ… æ­¥éª¤ä¸‰ï¼šAndroidManifest.xml é…ç½®</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">package</span>=<span class="string">&quot;org.qtproject.example.activityhandler&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¼€æœºå¹¿æ’­æƒé™ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ‚¬æµ®çª—æƒé™ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.SYSTEM_ALERT_WINDOW&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">application</span> <span class="attr">android:label</span>=<span class="string">&quot;@string/app_name&quot;</span> <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/ic_launcher&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Qt å¯åŠ¨ Activity --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;.JBmsActivity&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">android:label</span>=<span class="string">&quot;My Qt App&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">android:configChanges</span>=<span class="string">&quot;orientation|screenSize|keyboardHidden&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">android:launchMode</span>=<span class="string">&quot;singleTop&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">android:theme</span>=<span class="string">&quot;@android:style/Theme.NoTitleBar.Fullscreen&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">android:screenOrientation</span>=<span class="string">&quot;portrait&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.MAIN&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.LAUNCHER&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- å¯åŠ¨å¹¿æ’­ç›‘å¬å™¨ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">receiver</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:name</span>=<span class="string">&quot;.BootReceiver&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:enabled</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:exported</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:permission</span>=<span class="string">&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.BOOT_COMPLETED&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ§ -å¯åŠ¨æµç¨‹å›¾ï¼ˆç®€è¿°ï¼‰"><a href="#ğŸ§ -å¯åŠ¨æµç¨‹å›¾ï¼ˆç®€è¿°ï¼‰" class="headerlink" title="ğŸ§  å¯åŠ¨æµç¨‹å›¾ï¼ˆç®€è¿°ï¼‰"></a>ğŸ§  å¯åŠ¨æµç¨‹å›¾ï¼ˆç®€è¿°ï¼‰</h2><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">è®¾å¤‡å¼€æœº</span><br><span class="line">  â†“</span><br><span class="line">å‘é€ BOOT_COMPLETED å¹¿æ’­</span><br><span class="line">  â†“</span><br><span class="line">BootReceiver æ¥æ”¶ â†’ å¯åŠ¨ JBmsActivity</span><br><span class="line">  â†“</span><br><span class="line">JBmsActivity ç»§æ‰¿ QtActivity â†’ è‡ªåŠ¨å¯åŠ¨ Qt çš„ main()</span><br><span class="line">  â†“</span><br><span class="line">Qt åº”ç”¨å¼€å§‹è¿è¡Œ</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="âœ…-æ³¨æ„äº‹é¡¹"><a href="#âœ…-æ³¨æ„äº‹é¡¹" class="headerlink" title="âœ… æ³¨æ„äº‹é¡¹"></a>âœ… æ³¨æ„äº‹é¡¹</h2><ul>
<li>Android 8.0+ è¦æ±‚ï¼šåº”ç”¨å¿…é¡» <strong>æ‰‹åŠ¨å¯åŠ¨è¿‡ä¸€æ¬¡</strong> æ‰èƒ½æ¥æ”¶ BOOT_COMPLETED</li>
<li>æ‚¬æµ®çª—æƒé™å±äºç‰¹æ®Šæƒé™ï¼Œç”¨æˆ·å¿…é¡»æ‰‹åŠ¨æˆæƒ</li>
<li>åœ¨å›½äº§ ROM ä¸­å¯èƒ½è¿˜éœ€æ‰‹åŠ¨åŠ å…¥â€œè‡ªå¯ç™½åå•â€</li>
</ul>
<hr>
<p>æœ¬æ–‡é€‚ç”¨äºåŸºäº Qt 5&#x2F;6 çš„ Android é¡¹ç›®ï¼Œå¦‚éœ€æ­é… JNI ä¸åŸç”ŸæœåŠ¡è¿˜å¯æ‰©å±• Service ä¿æ´»ç­–ç•¥ã€‚</p>
<hr>
<h2 id="ğŸ§ -JBmsActivity-å°±æ˜¯-Android-ä¸‹çš„-Qt-å¯åŠ¨â€œmain-å‡½æ•°å…¥å£â€"><a href="#ğŸ§ -JBmsActivity-å°±æ˜¯-Android-ä¸‹çš„-Qt-å¯åŠ¨â€œmain-å‡½æ•°å…¥å£â€" class="headerlink" title="ğŸ§  JBmsActivity å°±æ˜¯ Android ä¸‹çš„ Qt å¯åŠ¨â€œmain å‡½æ•°å…¥å£â€"></a>ğŸ§  JBmsActivity å°±æ˜¯ Android ä¸‹çš„ Qt å¯åŠ¨â€œmain å‡½æ•°å…¥å£â€</h2><p>åœ¨æ¡Œé¢ Qt åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸é€šè¿‡ <code>main()</code> å‡½æ•°ä½œä¸ºç¨‹åºå…¥å£ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">app</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    MainWindow w;</span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line">    <span class="keyword">return</span> app.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½†åœ¨ Android å¹³å°ï¼ŒQt åº”ç”¨æ— æ³•ç›´æ¥ä» <code>main()</code> å¯åŠ¨ï¼Œè€Œæ˜¯ä¾èµ– Android çš„å¯åŠ¨æœºåˆ¶ï¼š</p>
<table>
<thead>
<tr>
<th>æ¡Œé¢ Qt</th>
<th>Android Qt</th>
</tr>
</thead>
<tbody><tr>
<td>ç›´æ¥è¿è¡Œ <code>main()</code></td>
<td>ç³»ç»Ÿå¯åŠ¨ <code>JBmsActivity</code></td>
</tr>
<tr>
<td><code>main()</code> ç”±å¼€å‘è€…æ§åˆ¶</td>
<td><code>main()</code> è¢« QtActivity é€šè¿‡ JNI é—´æ¥è°ƒç”¨</td>
</tr>
<tr>
<td>ç”Ÿå‘½å‘¨æœŸåœ¨ C++ æ§åˆ¶</td>
<td>ç”Ÿå‘½å‘¨æœŸç”± Java å±‚æ§åˆ¶ï¼Œå¯ hook å„é˜¶æ®µé€»è¾‘</td>
</tr>
</tbody></table>
<p>å› æ­¤ï¼Œ<code>JBmsActivity</code>ï¼š</p>
<ul>
<li>æ˜¯ç³»ç»Ÿå¯åŠ¨ Qt çš„ç¬¬ä¸€ç«™ï¼›</li>
<li>å¯ä»¥ç”¨æ¥æ£€æŸ¥æƒé™ã€åŠ è½½é…ç½®ï¼›</li>
<li>å¯ä»¥æ§åˆ¶æ˜¯å¦è¿›å…¥ Qt ä¸»ç¨‹åºï¼›</li>
<li>æ˜¯æ§åˆ¶æ•´ä¸ªç¨‹åºç”Ÿå‘½å‘¨æœŸçš„é‡è¦ä½ç½®ï¼›</li>
<li>ç±»ä¼¼â€œAndroid ç¯å¢ƒä¸‹çš„ main å‡½æ•°å®ˆé—¨äººâ€ã€‚</li>
</ul>
<p>ä½ ä¹Ÿå¯ä»¥é€‰æ‹©åœ¨ <code>JBmsActivity</code> é‡Œæ ¹æ®ä¸šåŠ¡é€»è¾‘å†³å®šï¼š</p>
<ul>
<li>æ˜¯å¦ç›´æ¥å¯åŠ¨ Qtï¼›</li>
<li>å»¶è¿Ÿè¿›å…¥ Qtï¼›</li>
<li>æˆ–è€…æ ¹æœ¬ä¸è¿›å…¥ Qtï¼Œä»…è¿è¡Œ Java å±‚é€»è¾‘ã€‚</li>
</ul>
<p>è¿™ä½¿å¾— <code>JBmsActivity</code> æˆä¸º Android Qt é¡¹ç›®çš„å…³é”®å…¥å£ç‚¹ã€‚</p>
]]></content>
      <categories>
        <category>QTå®ä¾‹</category>
      </categories>
      <tags>
        <tag>QT for Android</tag>
        <tag>QT</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2025/02/16/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>Hexo åšå®¢éƒ¨ç½² GitHub å¤±è´¥è§£å†³æ–¹æ¡ˆ</title>
    <url>/2025/03/25/hexo_github_%E9%83%A8%E7%BD%B2%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
    <content><![CDATA[<blockquote>
<p>Hexo åšå®¢éƒ¨ç½² GitHub Pages å‡ºç° æ— æ³•æ›´æ–° ç”šè‡³404é”™è¯¯ çš„å®Œæ•´æ’æŸ¥ä¸ä¿®å¤è®°å½•ï¼ˆå« .nojekyll + Actions å†²çªï¼‰</p>
</blockquote>
<hr>
<h2 id="ğŸ“Œ-èƒŒæ™¯"><a href="#ğŸ“Œ-èƒŒæ™¯" class="headerlink" title="ğŸ“Œ èƒŒæ™¯"></a>ğŸ“Œ èƒŒæ™¯</h2><p>åœ¨ä½¿ç”¨ Hexo éƒ¨ç½²é™æ€åšå®¢åˆ° GitHub Pages çš„è¿‡ç¨‹ä¸­ï¼Œè™½ç„¶æœ¬åœ° <code>hexo g &amp;&amp; hexo d</code> æ‰§è¡ŒæˆåŠŸï¼Œä½†è®¿é—® <code>https://ç”¨æˆ·å.github.io/</code> å´å‘ç°æ²¡æœ‰æ›´æ–°ï¼Œç”šè‡³å‡ºç° 404 é”™è¯¯ã€‚</p>
<hr>
<h2 id="ğŸ’¥-é‡åˆ°çš„é—®é¢˜"><a href="#ğŸ’¥-é‡åˆ°çš„é—®é¢˜" class="headerlink" title="ğŸ’¥ é‡åˆ°çš„é—®é¢˜"></a>ğŸ’¥ é‡åˆ°çš„é—®é¢˜</h2><h3 id="âŒ-GitHub-Actions-è‡ªåŠ¨éƒ¨ç½²å¤±è´¥"><a href="#âŒ-GitHub-Actions-è‡ªåŠ¨éƒ¨ç½²å¤±è´¥" class="headerlink" title="âŒ GitHub Actions è‡ªåŠ¨éƒ¨ç½²å¤±è´¥"></a>âŒ GitHub Actions è‡ªåŠ¨éƒ¨ç½²å¤±è´¥</h3><p>é”™è¯¯å¦‚ä¸‹ï¼š</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">Error: Getting Pages deployment status failed</span><br><span class="line">Error: HttpError: Server Error</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ§¨-é—®é¢˜ç—‡çŠ¶"><a href="#ğŸ§¨-é—®é¢˜ç—‡çŠ¶" class="headerlink" title="ğŸ§¨ é—®é¢˜ç—‡çŠ¶"></a>ğŸ§¨ é—®é¢˜ç—‡çŠ¶</h2><ul>
<li>é¡µé¢æç¤ºï¼š<code>404 - There isn&#39;t a GitHub Pages site here.</code></li>
<li>GitHub Actions ä¸­çš„ <code>pages-build-deployment</code> å¤šæ¬¡å¤±è´¥</li>
<li>GitHub Pages è®¾ç½®æ­£ç¡®ï¼Œä½¿ç”¨çš„æ˜¯ <code>main</code> åˆ†æ”¯ + <code>/ (root)</code></li>
<li>æœ¬åœ° Hexo éƒ¨ç½²æˆåŠŸï¼Œ<code>public/</code> ç›®å½•æ–‡ä»¶ä¹Ÿæ­£å¸¸ç”Ÿæˆ</li>
</ul>
<hr>
<h2 id="ğŸ§ -é—®é¢˜åŸå› æ€»ç»“"><a href="#ğŸ§ -é—®é¢˜åŸå› æ€»ç»“" class="headerlink" title="ğŸ§  é—®é¢˜åŸå› æ€»ç»“"></a>ğŸ§  é—®é¢˜åŸå› æ€»ç»“</h2><h3 id="âœ…-é—®é¢˜-1ï¼šGitHub-é»˜è®¤ä½¿ç”¨-Jekyll-æ„å»º"><a href="#âœ…-é—®é¢˜-1ï¼šGitHub-é»˜è®¤ä½¿ç”¨-Jekyll-æ„å»º" class="headerlink" title="âœ… é—®é¢˜ 1ï¼šGitHub é»˜è®¤ä½¿ç”¨ Jekyll æ„å»º"></a>âœ… é—®é¢˜ 1ï¼šGitHub é»˜è®¤ä½¿ç”¨ Jekyll æ„å»º</h3><p>Hexo æ˜¯é™æ€æ–‡ä»¶ï¼Œä¸éœ€è¦ Jekyllã€‚ä½† GitHub é»˜è®¤è®¤ä¸ºä½ çš„ç«™ç‚¹æ˜¯ç”¨ Jekyll æ„å»ºçš„ï¼Œå¯¼è‡´ï¼š</p>
<ul>
<li>éƒ¨åˆ†é¡µé¢ä¸åœçš„æ„å»ºå¤±è´¥</li>
<li>åŸå› æœªçŸ¥ï¼Œéƒ¨åˆ†é¡µé¢å¯ä»¥å®Œæˆæ„å»ºï¼Œéƒ¨åˆ†å°†å¤±è´¥ï¼Œè¿™éƒ¨åˆ†æ˜¯å¤±è´¥çš„æ„å»ºå°†ä½¿å½“æ­¤éƒ¨ç½²å¤±è´¥</li>
</ul>
<hr>
<h2 id="âœ…-è§£å†³æ–¹æ¡ˆæ­¥éª¤"><a href="#âœ…-è§£å†³æ–¹æ¡ˆæ­¥éª¤" class="headerlink" title="âœ… è§£å†³æ–¹æ¡ˆæ­¥éª¤"></a>âœ… è§£å†³æ–¹æ¡ˆæ­¥éª¤</h2><h3 id="ğŸ”§-æ­¥éª¤-1ï¼šåˆ›å»º-nojekyll-æ–‡ä»¶"><a href="#ğŸ”§-æ­¥éª¤-1ï¼šåˆ›å»º-nojekyll-æ–‡ä»¶" class="headerlink" title="ğŸ”§ æ­¥éª¤ 1ï¼šåˆ›å»º .nojekyll æ–‡ä»¶"></a>ğŸ”§ æ­¥éª¤ 1ï¼šåˆ›å»º <code>.nojekyll</code> æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> &gt; <span class="built_in">source</span>/.nojekyll</span><br></pre></td></tr></table></figure>

<p>æˆ–è€…åœ¨ <code>source/</code> ç›®å½•ä¸‹æ‰‹åŠ¨æ–°å»ºä¸€ä¸ª <code>.nojekyll</code> ç©ºæ–‡ä»¶ã€‚</p>
<p>è¯¥æ–‡ä»¶ä¸ºç©ºç™½æ–‡ä»¶ï¼Œæ„æ€ä¸ºå£°æ˜è¯¥ç›®å½•ä¸éœ€è¦githubè¿›è¡ŒJekyll æ„å»ºã€‚</p>
<hr>
<h3 id="ğŸ”§-æ­¥éª¤-2ï¼šé…ç½®-Hexo-è‡ªåŠ¨åŒ…å«-nojekyll"><a href="#ğŸ”§-æ­¥éª¤-2ï¼šé…ç½®-Hexo-è‡ªåŠ¨åŒ…å«-nojekyll" class="headerlink" title="ğŸ”§ æ­¥éª¤ 2ï¼šé…ç½® Hexo è‡ªåŠ¨åŒ…å« .nojekyll"></a>ğŸ”§ æ­¥éª¤ 2ï¼šé…ç½® Hexo è‡ªåŠ¨åŒ…å« <code>.nojekyll</code></h3><p>æ‰“å¼€ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code>ï¼Œæ·»åŠ ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">include:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">.nojekyll</span></span><br></pre></td></tr></table></figure>

<p>è¿™ä¸€æ­¥éå¸¸å…³é”®ï¼å®ƒèƒ½è®© Hexo æ„å»ºæ—¶è‡ªåŠ¨å°† <code>.nojekyll</code> æ‹·è´è¿› <code>public/</code> ç›®å½•ã€‚</p>
<hr>
<h3 id="ğŸ”§-æ­¥éª¤-3ï¼šé‡æ–°æ„å»ºå¹¶éƒ¨ç½²"><a href="#ğŸ”§-æ­¥éª¤-3ï¼šé‡æ–°æ„å»ºå¹¶éƒ¨ç½²" class="headerlink" title="ğŸ”§ æ­¥éª¤ 3ï¼šé‡æ–°æ„å»ºå¹¶éƒ¨ç½²"></a>ğŸ”§ æ­¥éª¤ 3ï¼šé‡æ–°æ„å»ºå¹¶éƒ¨ç½²</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>

<hr>
<p>- </p>
<hr>
<h2 id="âœ…-æœ€ç»ˆæ•ˆæœ"><a href="#âœ…-æœ€ç»ˆæ•ˆæœ" class="headerlink" title="âœ… æœ€ç»ˆæ•ˆæœ"></a>âœ… æœ€ç»ˆæ•ˆæœ</h2><ul>
<li><code>https://ç”¨æˆ·å.github.io/</code> æ­£å¸¸åŠ è½½é¡µé¢</li>
<li>GitHub Pages ä¸å†æŠ¥é”™</li>
<li>æ‰€æœ‰ Hexo é™æ€èµ„æºéƒ½è¢«æ­£ç¡®éƒ¨ç½²å¹¶å¯è®¿é—®</li>
</ul>
<hr>
<h2 id="âœ¨-æ€»ç»“"><a href="#âœ¨-æ€»ç»“" class="headerlink" title="âœ¨ æ€»ç»“"></a>âœ¨ æ€»ç»“</h2><table>
<thead>
<tr>
<th>é…ç½®é¡¹</th>
<th>æ˜¯å¦å®Œæˆ</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><code>.nojekyll</code> æ–‡ä»¶</td>
<td>âœ…</td>
<td>ç¦ç”¨ Jekyll</td>
</tr>
<tr>
<td><code>include:</code> é…ç½®</td>
<td>âœ…</td>
<td>ç¡®ä¿ <code>.nojekyll</code> è¢«æ‰“åŒ…åˆ° public</td>
</tr>
<tr>
<td>Pages æºè®¾ç½®</td>
<td>âœ…</td>
<td>main åˆ†æ”¯ + &#x2F; æ ¹ç›®å½•</td>
</tr>
</tbody></table>
<hr>
<p>ğŸš€ <strong>éƒ¨ç½²æˆåŠŸçš„å…³é”®åœ¨äº <code>.nojekyll + include é…ç½®</code>ï¼Œä¸€æ—¦è®¾ç½®å®Œæ¯•ï¼Œå³å¯è·³è¿‡æ‰€æœ‰ Jekyll å’Œ Actions çš„æ„å»ºå¹²æ‰°ã€‚</strong></p>
]]></content>
      <categories>
        <category>æ•™ç¨‹</category>
      </categories>
      <tags>
        <tag>GitHub</tag>
      </tags>
  </entry>
  <entry>
    <title>Qt UI æ˜¾ç¤ºå™¨åˆ†è¾¨ç‡å·®å¼‚é€ æˆæ§ä»¶ä¸å­—ä½“ç¼©æ”¾å·®å¼‚è§£å†³æ–¹æ¡ˆ</title>
    <url>/2025/04/02/qt_UI_%E6%98%BE%E7%A4%BA%E5%99%A8%E5%88%86%E8%BE%A8%E7%8E%87%E5%B7%AE%E5%BC%82%E9%80%A0%E6%88%90%E6%8E%A7%E4%BB%B6%E4%B8%8E%E5%AD%97%E4%BD%93%E7%BC%A9%E6%94%BE%E5%B7%AE%E5%BC%82%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
    <content><![CDATA[<blockquote>
<p>å¦‚ä½•æ‰‹åŠ¨é…ç½® Qt çš„é«˜ DPI ç¼©æ”¾ç­–ç•¥ã€‚</p>
</blockquote>
<hr>
<h2 id="ä¸€ã€ç›®çš„è¯´æ˜"><a href="#ä¸€ã€ç›®çš„è¯´æ˜" class="headerlink" title="ä¸€ã€ç›®çš„è¯´æ˜"></a>ä¸€ã€ç›®çš„è¯´æ˜</h2><p>åœ¨å¤šåˆ†è¾¨ç‡æˆ–é«˜ DPI æ˜¾ç¤ºå™¨ç¯å¢ƒä¸‹ï¼ˆä¾‹å¦‚ 1080p ä¸ 4K æ˜¾ç¤ºå™¨æ··ç”¨ï¼‰ï¼Œé»˜è®¤ Qt çš„ç¼©æ”¾è¡Œä¸ºå¯èƒ½å¯¼è‡´ï¼š</p>
<ul>
<li>æ§ä»¶å°ºå¯¸æ˜¾ç¤ºä¸ä¸€è‡´</li>
<li>å­—ä½“å’Œæ§ä»¶æ¯”ä¾‹ä¸æ­£ç¡®</li>
</ul>
<p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œéœ€è¦æ‰‹åŠ¨é…ç½® Qt çš„é«˜ DPI ç¼©æ”¾ç­–ç•¥ã€‚</p>
<hr>
<h2 id="äºŒã€æ§ä»¶ä¸å­—ä½“ç¼©æ”¾ä¸ä¸€è‡´é—®é¢˜è¯¦è§£"><a href="#äºŒã€æ§ä»¶ä¸å­—ä½“ç¼©æ”¾ä¸ä¸€è‡´é—®é¢˜è¯¦è§£" class="headerlink" title="äºŒã€æ§ä»¶ä¸å­—ä½“ç¼©æ”¾ä¸ä¸€è‡´é—®é¢˜è¯¦è§£"></a>äºŒã€æ§ä»¶ä¸å­—ä½“ç¼©æ”¾ä¸ä¸€è‡´é—®é¢˜è¯¦è§£</h2><p>åœ¨å¤šåˆ†è¾¨ç‡æ˜¾ç¤ºå™¨ç¯å¢ƒä¸­ï¼Œæ§ä»¶å°ºå¯¸ä¸å­—ä½“å¤§å°å¸¸å¸¸è¡¨ç°ä¸ä¸€è‡´ï¼ŒåŸå› åœ¨äºå®ƒä»¬çš„å•ä½å’Œç¼©æ”¾æœºåˆ¶ä¸åŒã€‚</p>
<h3 id="1-æ§ä»¶å¤§å°è®¾ç½®ï¼ˆä»¥åƒç´ ä¸ºå•ä½ï¼‰"><a href="#1-æ§ä»¶å¤§å°è®¾ç½®ï¼ˆä»¥åƒç´ ä¸ºå•ä½ï¼‰" class="headerlink" title="1. æ§ä»¶å¤§å°è®¾ç½®ï¼ˆä»¥åƒç´ ä¸ºå•ä½ï¼‰"></a>1. æ§ä»¶å¤§å°è®¾ç½®ï¼ˆä»¥åƒç´ ä¸ºå•ä½ï¼‰</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">button-&gt;<span class="built_in">setFixedSize</span>(<span class="number">100</span>, <span class="number">40</span>); <span class="comment">// è®¾ç½®ä¸º 100x40 åƒç´ </span></span><br></pre></td></tr></table></figure>

<ul>
<li>æ§ä»¶å°ºå¯¸ä½¿ç”¨**åƒç´ ï¼ˆpxï¼‰**ä¸ºå•ä½ï¼Œ<strong>ä¸ä¼šè‡ªåŠ¨å‚ä¸ DPI ç¼©æ”¾</strong>ã€‚</li>
<li>åœ¨é«˜ DPI å±å¹•ä¸­ï¼ŒåŒæ ·åƒç´ ä¼šæ˜¾å¾—æ›´å°ã€‚</li>
<li>å¦‚æœæœªå¯ç”¨ Qt çš„é«˜ DPI ç¼©æ”¾æœºåˆ¶ï¼Œæ§ä»¶å°ºå¯¸åœ¨é«˜åˆ†å±ä¸Šä¼šâ€œç¼©æ°´â€ã€‚</li>
</ul>
<h3 id="2-å­—ä½“å¤§å°è®¾ç½®ï¼ˆä»¥ç‚¹ä¸ºå•ä½ï¼‰"><a href="#2-å­—ä½“å¤§å°è®¾ç½®ï¼ˆä»¥ç‚¹ä¸ºå•ä½ï¼‰" class="headerlink" title="2. å­—ä½“å¤§å°è®¾ç½®ï¼ˆä»¥ç‚¹ä¸ºå•ä½ï¼‰"></a>2. å­—ä½“å¤§å°è®¾ç½®ï¼ˆä»¥ç‚¹ä¸ºå•ä½ï¼‰</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">QFont font;</span><br><span class="line">font.<span class="built_in">setPointSize</span>(<span class="number">12</span>);</span><br><span class="line">widget-&gt;<span class="built_in">setFont</span>(font);</span><br></pre></td></tr></table></figure>

<ul>
<li>å­—ä½“å¤§å°ä½¿ç”¨**ç‚¹ï¼ˆptï¼‰**ä¸ºå•ä½ï¼Œ<strong>ä¼šè‡ªåŠ¨éš DPI ç¼©æ”¾</strong>ï¼ˆå¯ç”¨äº†é«˜ DPI æ”¯æŒæ—¶ï¼‰ã€‚</li>
<li>å­—ä½“åœ¨ä¸åŒ DPI å±å¹•ä¸‹æ˜¾ç¤ºæ›´ä¸€è‡´ã€‚</li>
</ul>
<hr>
<h3 id="ğŸ“Š-å¸¸è§é—®é¢˜è¡¨ç°å¯¹æ¯”"><a href="#ğŸ“Š-å¸¸è§é—®é¢˜è¡¨ç°å¯¹æ¯”" class="headerlink" title="ğŸ“Š å¸¸è§é—®é¢˜è¡¨ç°å¯¹æ¯”"></a>ğŸ“Š å¸¸è§é—®é¢˜è¡¨ç°å¯¹æ¯”</h3><table>
<thead>
<tr>
<th>åœºæ™¯</th>
<th>æ™®é€šå±æ•ˆæœ</th>
<th>é«˜åˆ†å±æ•ˆæœï¼ˆæœªå¤„ç†ï¼‰</th>
<th>é—®é¢˜è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>æ§ä»¶å¤§å°</td>
<td>æ­£å¸¸</td>
<td>æ˜¾å¾—å¾ˆå°</td>
<td>æ§ä»¶æŒ‰åƒç´ æ¸²æŸ“ï¼Œæœªå‚ä¸ DPI ç¼©æ”¾</td>
</tr>
<tr>
<td>å­—ä½“å¤§å°</td>
<td>æ­£å¸¸</td>
<td>çœ‹èµ·æ¥åˆç†</td>
<td>å­—ä½“æŒ‰ç‚¹å•ä½è‡ªåŠ¨ç¼©æ”¾äº†</td>
</tr>
</tbody></table>
<hr>
<h2 id="ä¸‰ã€æ¨èé…ç½®æ–¹æ¡ˆ"><a href="#ä¸‰ã€æ¨èé…ç½®æ–¹æ¡ˆ" class="headerlink" title="ä¸‰ã€æ¨èé…ç½®æ–¹æ¡ˆ"></a>ä¸‰ã€æ¨èé…ç½®æ–¹æ¡ˆ</h2><p>mainå‡½æ•°å†…<br><code>QApplication a(argc, argv);</code>å‰,è®¾ç½®å¦‚ä¸‹</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¯ç”¨é«˜ DPI ç¼©æ”¾æ”¯æŒï¼ˆQt 5.6+ï¼‰</span></span><br><span class="line">QCoreApplication::<span class="built_in">setAttribute</span>(Qt::AA_EnableHighDpiScaling);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨é«˜åˆ†è¾¨ç‡å›¾åƒèµ„æºï¼ˆé¿å…å›¾æ ‡æ¨¡ç³Šï¼‰</span></span><br><span class="line">QCoreApplication::<span class="built_in">setAttribute</span>(Qt::AA_UseHighDpiPixmaps);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®ç¼©æ”¾å› å­èˆå…¥ç­–ç•¥ä¸º PassThroughï¼Œé¿å…è¢« Qt è‡ªåŠ¨å››èˆäº”å…¥</span></span><br><span class="line">QGuiApplication::<span class="built_in">setHighDpiScaleFactorRoundingPolicy</span>(</span><br><span class="line">    Qt::HighDpiScaleFactorRoundingPolicy::PassThrough);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯ç”¨è‡ªåŠ¨æ ¹æ®å±å¹•åˆ†è¾¨ç‡ç¼©æ”¾</span></span><br><span class="line"><span class="built_in">qputenv</span>(<span class="string">&quot;QT_AUTO_SCREEN_SCALE_FACTOR&quot;</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ï¼ˆå¯é€‰ï¼‰å›ºå®šæ•´ä¸ªåº”ç”¨ç¼©æ”¾æ¯”ä¾‹ä¸º 1.25 å€ï¼ˆæµ‹è¯•ç”¨ï¼‰</span></span><br><span class="line"><span class="comment">// qputenv(&quot;QT_SCALE_FACTOR&quot;, &quot;1.25&quot;);</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="å››ã€å…³é”®è®¾ç½®è§£é‡Š"><a href="#å››ã€å…³é”®è®¾ç½®è§£é‡Š" class="headerlink" title="å››ã€å…³é”®è®¾ç½®è§£é‡Š"></a>å››ã€å…³é”®è®¾ç½®è§£é‡Š</h2><h3 id="1-Qt-HighDpiScaleFactorRoundingPolicy-PassThrough"><a href="#1-Qt-HighDpiScaleFactorRoundingPolicy-PassThrough" class="headerlink" title="1. Qt::HighDpiScaleFactorRoundingPolicy::PassThrough"></a>1. <code>Qt::HighDpiScaleFactorRoundingPolicy::PassThrough</code></h3><ul>
<li>ä¸èˆå…¥ç¼©æ”¾å› å­ï¼Œä¾‹å¦‚ 1.25 å°±ä¿æŒä¸º 1.25ï¼Œè€Œä¸æ˜¯å››èˆäº”å…¥ä¸º 1 æˆ– 2ã€‚</li>
<li>é¿å…å› ç¼©æ”¾è¢«æ”¹å†™å¯¼è‡´æ§ä»¶æˆ–å­—ä½“æ˜¾ç¤ºå¼‚å¸¸ã€‚</li>
<li>é€‚ç”¨äºéœ€è¦ç²¾ç¡®ç¼©æ”¾æ§åˆ¶çš„åº”ç”¨ã€‚</li>
</ul>
<h3 id="2-QT-AUTO-SCREEN-SCALE-FACTOR-1"><a href="#2-QT-AUTO-SCREEN-SCALE-FACTOR-1" class="headerlink" title="2. QT_AUTO_SCREEN_SCALE_FACTOR=1"></a>2. <code>QT_AUTO_SCREEN_SCALE_FACTOR=1</code></h3><ul>
<li>æ ¹æ®å½“å‰æ˜¾ç¤ºå™¨çš„ DPI è‡ªåŠ¨è®¡ç®—ç¼©æ”¾å› å­ã€‚</li>
<li>å¤šå±å¹•ï¼ˆä¸åŒ DPIï¼‰ä¸‹è‡ªåŠ¨é€‚é…ã€‚</li>
</ul>
<h3 id="3-AA-EnableHighDpiScaling"><a href="#3-AA-EnableHighDpiScaling" class="headerlink" title="3. AA_EnableHighDpiScaling"></a>3. <code>AA_EnableHighDpiScaling</code></h3><ul>
<li>å¯ç”¨ Qt é«˜ DPI ç¼©æ”¾æ”¯æŒã€‚</li>
<li>è¿™æ˜¯å¯ç”¨ç¼©æ”¾æœºåˆ¶çš„åŸºç¡€é…ç½®ã€‚</li>
</ul>
<h3 id="4-AA-UseHighDpiPixmaps"><a href="#4-AA-UseHighDpiPixmaps" class="headerlink" title="4. AA_UseHighDpiPixmaps"></a>4. <code>AA_UseHighDpiPixmaps</code></h3><ul>
<li>å›¾åƒèµ„æºä¹Ÿå°†ä½¿ç”¨é«˜åˆ†è¾¨ç‡ç‰ˆæœ¬ï¼ˆå¦‚ 2x PNG å›¾æ ‡ï¼‰ï¼Œä¿è¯æ¸…æ™°åº¦ã€‚</li>
</ul>
<h3 id="5-QT-SCALE-FACTOR-1-25ï¼ˆå¯é€‰ï¼‰"><a href="#5-QT-SCALE-FACTOR-1-25ï¼ˆå¯é€‰ï¼‰" class="headerlink" title="5. QT_SCALE_FACTOR=1.25ï¼ˆå¯é€‰ï¼‰"></a>5. <code>QT_SCALE_FACTOR=1.25</code>ï¼ˆå¯é€‰ï¼‰</h3><ul>
<li>æ‰‹åŠ¨è®¾ç½®åº”ç”¨ç¼©æ”¾å€æ•°ï¼Œç”¨äºè°ƒè¯•æˆ–ä¸´æ—¶é€‚é…ä¸æ”¯æŒè‡ªåŠ¨ç¼©æ”¾çš„å¹³å°ã€‚</li>
</ul>
<hr>
<h2 id="äº”ã€æ•ˆæœæ€»ç»“"><a href="#äº”ã€æ•ˆæœæ€»ç»“" class="headerlink" title="äº”ã€æ•ˆæœæ€»ç»“"></a>äº”ã€æ•ˆæœæ€»ç»“</h2><ul>
<li>å¤šæ˜¾ç¤ºå™¨ç¼©æ”¾ä¸€è‡´æ€§å¢å¼º</li>
<li>æ§ä»¶ä¸å­—ä½“æŒ‰æ¯”ä¾‹ç²¾å‡†ç¼©æ”¾</li>
<li>ç•Œé¢æ¸…æ™°ä¸æ¨¡ç³Šï¼Œç‰¹åˆ«é€‚ç”¨äº 2K&#x2F;4K æ˜¾ç¤ºå™¨</li>
</ul>
<hr>
]]></content>
      <categories>
        <category>QT_UIæ ·å¼é…ç½®</category>
      </categories>
      <tags>
        <tag>QT</tag>
        <tag>QT_UI</tag>
      </tags>
  </entry>
  <entry>
    <title>Qt for Android ä½¿ç”¨ JNI çš„å®Œæ•´æŒ‡å—</title>
    <url>/2025/03/09/qt_android_jni/</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æŒ‡å—è®°å½•äº†å¦‚ä½•åœ¨ Qt é¡¹ç›®ä¸­é€šè¿‡ JNIï¼ˆJava Native Interfaceï¼‰è°ƒç”¨ Android åŸç”Ÿ Java æ–¹æ³•ï¼Œé€‚ç”¨äºéœ€è¦è®¿é—®ç³»ç»ŸåŠŸèƒ½ï¼ˆå¦‚ U ç›˜è¯»å†™ã€å¹¿æ’­ã€Activity å¯åŠ¨ç­‰ï¼‰çš„åœºæ™¯ã€‚</p>
</blockquote>
<hr>
<h2 id="ğŸ“-é¡¹ç›®ç»“æ„å»ºè®®"><a href="#ğŸ“-é¡¹ç›®ç»“æ„å»ºè®®" class="headerlink" title="ğŸ“ é¡¹ç›®ç»“æ„å»ºè®®"></a>ğŸ“ é¡¹ç›®ç»“æ„å»ºè®®</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">your_qt_project/</span><br><span class="line">â”œâ”€â”€ main.cpp</span><br><span class="line">â”œâ”€â”€ your_qt_project.pro</span><br><span class="line">â”œâ”€â”€ android/</span><br><span class="line">â”‚   â”œâ”€â”€ AndroidManifest.xml</span><br><span class="line">â”‚   â””â”€â”€ src/org/qtproject/example/activityhandler/</span><br><span class="line">â”‚       â”œâ”€â”€ CustomActivity1.java</span><br><span class="line">â”‚       â”œâ”€â”€ CustomActivity2.java</span><br><span class="line">â”‚       â””â”€â”€ CustomActivity3.java</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="âš™ï¸-pro-æ–‡ä»¶é…ç½®"><a href="#âš™ï¸-pro-æ–‡ä»¶é…ç½®" class="headerlink" title="âš™ï¸ .pro æ–‡ä»¶é…ç½®"></a>âš™ï¸ <code>.pro</code> æ–‡ä»¶é…ç½®</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">    QT += androidextras  # å¯ç”¨ Qt å°è£…çš„ JNI æ”¯æŒæ¨¡å—</span><br><span class="line"></span><br><span class="line">    ANDROID_PACKAGE_SOURCE_DIR = $$PWD/android  # ä½¿ç”¨è‡ªå®šä¹‰ Android å·¥ç¨‹ç›®å½•</span><br><span class="line"></span><br><span class="line">    # å¯é€‰ï¼šé™„åŠ æ‰“åŒ… Java ä¸ Manifest æ–‡ä»¶ï¼Œæ–¹ä¾¿ IDE æ˜¾ç¤º</span><br><span class="line">    DISTFILES +=         android/AndroidManifest.xml         android/src/org/qtproject/example/activityhandler/CustomActivity1.java         android/src/org/qtproject/example/activityhandler/CustomActivity2.java         android/src/org/qtproject/example/activityhandler/CustomActivity3.java</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ“¦-Java-ç±»ç¤ºä¾‹"><a href="#ğŸ“¦-Java-ç±»ç¤ºä¾‹" class="headerlink" title="ğŸ“¦ Java ç±»ç¤ºä¾‹"></a>ğŸ“¦ Java ç±»ç¤ºä¾‹</h2><p><strong>CustomActivity1.java</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.qtproject.example.activityhandler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomActivity1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">helloFromJava</span><span class="params">()</span> &#123;</span><br><span class="line">        Log.d(<span class="string">&quot;JNI&quot;</span>, <span class="string">&quot;Hello from Java!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getNtpServer</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;pool.ntp.org&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title function_">notifyCpp</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="ğŸ§©-Qt-ä¸­è°ƒç”¨-Java-çš„å¤šç§æ–¹å¼æ€»ç»“"><a href="#ğŸ§©-Qt-ä¸­è°ƒç”¨-Java-çš„å¤šç§æ–¹å¼æ€»ç»“" class="headerlink" title="ğŸ§© Qt ä¸­è°ƒç”¨ Java çš„å¤šç§æ–¹å¼æ€»ç»“"></a>ğŸ§© Qt ä¸­è°ƒç”¨ Java çš„å¤šç§æ–¹å¼æ€»ç»“</h1><h2 id="âœ…-1-è°ƒç”¨-Java-é™æ€æ–¹æ³•ï¼ˆæ¨èï¼‰"><a href="#âœ…-1-è°ƒç”¨-Java-é™æ€æ–¹æ³•ï¼ˆæ¨èï¼‰" class="headerlink" title="âœ… 1. è°ƒç”¨ Java é™æ€æ–¹æ³•ï¼ˆæ¨èï¼‰"></a>âœ… 1. è°ƒç”¨ Java é™æ€æ–¹æ³•ï¼ˆæ¨èï¼‰</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">QAndroidJniObject::<span class="built_in">callStaticMethod</span>&lt;<span class="type">void</span>&gt;(</span><br><span class="line">    <span class="string">&quot;org/qtproject/example/activityhandler/CustomActivity1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;helloFromJava&quot;</span>,</span><br><span class="line">    <span class="string">&quot;()V&quot;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<ul>
<li>é€‚åˆè°ƒç”¨ Java çš„ <code>public static</code> æ–¹æ³•ã€‚</li>
<li>æ–¹æ³•ç­¾åï¼š<code>()V</code> è¡¨ç¤ºæ— å‚æ— è¿”å›ã€‚</li>
</ul>
<hr>
<h2 id="âœ…-2-åˆ›å»º-Java-å¯¹è±¡å¹¶è°ƒç”¨å®ä¾‹æ–¹æ³•"><a href="#âœ…-2-åˆ›å»º-Java-å¯¹è±¡å¹¶è°ƒç”¨å®ä¾‹æ–¹æ³•" class="headerlink" title="âœ… 2. åˆ›å»º Java å¯¹è±¡å¹¶è°ƒç”¨å®ä¾‹æ–¹æ³•"></a>âœ… 2. åˆ›å»º Java å¯¹è±¡å¹¶è°ƒç”¨å®ä¾‹æ–¹æ³•</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">QAndroidJniObject <span class="title">javaObj</span><span class="params">(<span class="string">&quot;org/qtproject/example/activityhandler/CustomActivity2&quot;</span>)</span></span>;</span><br><span class="line">javaObj.<span class="built_in">callMethod</span>&lt;<span class="type">void</span>&gt;(<span class="string">&quot;nonStaticMethodName&quot;</span>, <span class="string">&quot;()V&quot;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>é€‚åˆ Java çš„éé™æ€æ–¹æ³•ã€‚</li>
<li>æ”¯æŒå¤šæ¬¡äº¤äº’ä½¿ç”¨ã€‚</li>
</ul>
<hr>
<h2 id="âœ…-3-è°ƒç”¨å¸¦å‚æ•°çš„æ–¹æ³•"><a href="#âœ…-3-è°ƒç”¨å¸¦å‚æ•°çš„æ–¹æ³•" class="headerlink" title="âœ… 3. è°ƒç”¨å¸¦å‚æ•°çš„æ–¹æ³•"></a>âœ… 3. è°ƒç”¨å¸¦å‚æ•°çš„æ–¹æ³•</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">QAndroidJniObject param = QAndroidJniObject::<span class="built_in">fromString</span>(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">QAndroidJniObject::<span class="built_in">callStaticMethod</span>&lt;<span class="type">void</span>&gt;(</span><br><span class="line">    <span class="string">&quot;org/qtproject/example/activityhandler/CustomActivity1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;printMessage&quot;</span>,</span><br><span class="line">    <span class="string">&quot;(Ljava/lang/String;)V&quot;</span>,</span><br><span class="line">    param.<span class="built_in">object</span>&lt;jstring&gt;()</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<ul>
<li><code>(Ljava/lang/String;)V</code> è¡¨ç¤ºæ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼Œæ— è¿”å›å€¼ã€‚</li>
<li>å‚æ•°å’Œè¿”å›å€¼çš„ JNI ç­¾åå¯å‚è€ƒ JNI æ–‡æ¡£ã€‚</li>
</ul>
<hr>
<h2 id="âœ…-4-è·å–-Java-å¯¹è±¡è¿”å›å€¼ï¼ˆå¦‚-Stringï¼‰"><a href="#âœ…-4-è·å–-Java-å¯¹è±¡è¿”å›å€¼ï¼ˆå¦‚-Stringï¼‰" class="headerlink" title="âœ… 4. è·å– Java å¯¹è±¡è¿”å›å€¼ï¼ˆå¦‚ Stringï¼‰"></a>âœ… 4. è·å– Java å¯¹è±¡è¿”å›å€¼ï¼ˆå¦‚ Stringï¼‰</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">QAndroidJniObject result = QAndroidJniObject::<span class="built_in">callStaticObjectMethod</span>(</span><br><span class="line">    <span class="string">&quot;org/qtproject/example/activityhandler/CustomActivity&quot;</span>,</span><br><span class="line">    <span class="string">&quot;getNtpServer&quot;</span>,</span><br><span class="line">    <span class="string">&quot;()Ljava/lang/String;&quot;</span></span><br><span class="line">);</span><br><span class="line">QString str = result.<span class="built_in">toString</span>();</span><br></pre></td></tr></table></figure>

<ul>
<li>é€‚ç”¨äºè¿”å› Java å¯¹è±¡çš„æƒ…å†µï¼Œå¦‚ <code>String</code>ã€‚</li>
<li>è¿”å›å€¼ä½¿ç”¨ <code>QAndroidJniObject</code> æ¥æ”¶å¹¶è½¬ä¸º QStringã€‚</li>
</ul>
<hr>
<h2 id="âœ…-5-ä½¿ç”¨-QAndroidJniEnvironment-è¿›è¡Œåº•å±‚-JNI-è°ƒç”¨"><a href="#âœ…-5-ä½¿ç”¨-QAndroidJniEnvironment-è¿›è¡Œåº•å±‚-JNI-è°ƒç”¨" class="headerlink" title="âœ… 5. ä½¿ç”¨ QAndroidJniEnvironment è¿›è¡Œåº•å±‚ JNI è°ƒç”¨"></a>âœ… 5. ä½¿ç”¨ QAndroidJniEnvironment è¿›è¡Œåº•å±‚ JNI è°ƒç”¨</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">QAndroidJniEnvironment env;</span><br><span class="line">jclass clazz = env-&gt;</span><br><span class="line">    <span class="built_in">FindClass</span>(<span class="string">&quot;org/qtproject/example/activityhandler/CustomActivity1&quot;</span>);</span><br><span class="line">jmethodID methodId = env-&gt;<span class="built_in">GetStaticMethodID</span>(clazz, <span class="string">&quot;helloFromJava&quot;</span>, <span class="string">&quot;()V&quot;</span>);</span><br><span class="line">env-&gt;<span class="built_in">CallStaticVoidMethod</span>(clazz, methodId);</span><br></pre></td></tr></table></figure>

<ul>
<li>é€‚åˆé«˜çº§åœºæ™¯ï¼šå¤æ‚å‚æ•°æ§åˆ¶ã€å¼‚å¸¸å¤„ç†ã€‚</li>
<li>å¯ç»“åˆåŸç”Ÿ JNI èƒ½åŠ›ä½¿ç”¨ã€‚</li>
</ul>
<hr>
<h2 id="âœ…-6-Java-è°ƒç”¨-C-ï¼ˆNative-å›è°ƒï¼‰"><a href="#âœ…-6-Java-è°ƒç”¨-C-ï¼ˆNative-å›è°ƒï¼‰" class="headerlink" title="âœ… 6. Java è°ƒç”¨ C++ï¼ˆNative å›è°ƒï¼‰"></a>âœ… 6. Java è°ƒç”¨ C++ï¼ˆNative å›è°ƒï¼‰</h2><p>Java ä¾§ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomActivity1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title function_">notifyCpp</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>C++ ä¾§ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span> <span class="function">JNIEXPORT <span class="type">void</span> JNICALL</span></span><br><span class="line"><span class="function"><span class="title">Java_org_qtproject_example_activityhandler_CustomActivity1_notifyCpp</span><span class="params">(JNIEnv *env, jobject obj)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;Java è°ƒç”¨äº† C++&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Java ä½¿ç”¨ <code>native</code> å…³é”®å­—æ³¨å†Œæœ¬åœ°å‡½æ•°ã€‚</li>
<li>Qt ä½¿ç”¨ JNIEXPORT æä¾› C++ å›è°ƒå®ç°ã€‚</li>
</ul>
<hr>
<h2 id="ğŸ”„-callStaticMethod-ä¸-callStaticObjectMethod-åŒºåˆ«è¯¦è§£"><a href="#ğŸ”„-callStaticMethod-ä¸-callStaticObjectMethod-åŒºåˆ«è¯¦è§£" class="headerlink" title="ğŸ”„ callStaticMethod&lt;T&gt;() ä¸ callStaticObjectMethod() åŒºåˆ«è¯¦è§£"></a>ğŸ”„ <code>callStaticMethod&lt;T&gt;()</code> ä¸ <code>callStaticObjectMethod()</code> åŒºåˆ«è¯¦è§£</h2><h3 id="callStaticMethod-ï¼šç”¨äºè¿”å›åŸºæœ¬ç±»å‹"><a href="#callStaticMethod-ï¼šç”¨äºè¿”å›åŸºæœ¬ç±»å‹" class="headerlink" title="callStaticMethod&lt;T&gt;()ï¼šç”¨äºè¿”å›åŸºæœ¬ç±»å‹"></a><code>callStaticMethod&lt;T&gt;()</code>ï¼šç”¨äºè¿”å›åŸºæœ¬ç±»å‹</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> result = QAndroidJniObject::<span class="built_in">callStaticMethod</span>&lt;jint&gt;(</span><br><span class="line">    <span class="string">&quot;org/example/MyJavaClass&quot;</span>,</span><br><span class="line">    <span class="string">&quot;getCount&quot;</span>,</span><br><span class="line">    <span class="string">&quot;()I&quot;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="callStaticObjectMethod-ï¼šç”¨äºè¿”å›-Java-å¯¹è±¡ç±»å‹"><a href="#callStaticObjectMethod-ï¼šç”¨äºè¿”å›-Java-å¯¹è±¡ç±»å‹" class="headerlink" title="callStaticObjectMethod()ï¼šç”¨äºè¿”å› Java å¯¹è±¡ç±»å‹"></a><code>callStaticObjectMethod()</code>ï¼šç”¨äºè¿”å› Java å¯¹è±¡ç±»å‹</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">QAndroidJniObject result = QAndroidJniObject::<span class="built_in">callStaticObjectMethod</span>(</span><br><span class="line">    <span class="string">&quot;org/qtproject/example/activityhandler/CustomActivity&quot;</span>,</span><br><span class="line">    <span class="string">&quot;getNtpServer&quot;</span>,</span><br><span class="line">    <span class="string">&quot;()Ljava/lang/String;&quot;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="ğŸ§ -å¯¹æ¯”æ€»ç»“ï¼š"><a href="#ğŸ§ -å¯¹æ¯”æ€»ç»“ï¼š" class="headerlink" title="ğŸ§  å¯¹æ¯”æ€»ç»“ï¼š"></a>ğŸ§  å¯¹æ¯”æ€»ç»“ï¼š</h3><table>
<thead>
<tr>
<th>æ¯”è¾ƒé¡¹</th>
<th><code>callStaticMethod&lt;T&gt;()</code></th>
<th><code>callStaticObjectMethod()</code></th>
</tr>
</thead>
<tbody><tr>
<td>ä½¿ç”¨åœºæ™¯</td>
<td>Java é™æ€æ–¹æ³•è¿”å› <strong>åŸºæœ¬ç±»å‹</strong></td>
<td>Java é™æ€æ–¹æ³•è¿”å› <strong>å¯¹è±¡ç±»å‹</strong></td>
</tr>
<tr>
<td>è¿”å›ç±»å‹</td>
<td>C++ åŸºç¡€ç±»å‹ï¼Œå¦‚ <code>int</code>, <code>bool</code>, <code>void</code></td>
<td><code>QAndroidJniObject</code></td>
</tr>
<tr>
<td>JNI æ–¹æ³•ç­¾å</td>
<td>å¦‚ï¼š<code>()I</code>ã€<code>(I)V</code> ç­‰</td>
<td>å¦‚ï¼š<code>()Ljava/lang/String;</code></td>
</tr>
<tr>
<td>è·å–è¿”å›å€¼</td>
<td>ç›´æ¥ä½¿ç”¨å˜é‡</td>
<td>éœ€ <code>.toString()</code> æˆ– <code>.object&lt;&gt;()</code> æå–</td>
</tr>
<tr>
<td>å¸¸è§å¯¹è±¡ç±»å‹</td>
<td>ä¸é€‚ç”¨</td>
<td><code>String</code>, <code>List</code>, <code>è‡ªå®šä¹‰ç±»</code> ç­‰</td>
</tr>
</tbody></table>
<hr>
<h2 id="âœ…-AndroidManifest-xml-é…ç½®"><a href="#âœ…-AndroidManifest-xml-é…ç½®" class="headerlink" title="âœ… AndroidManifest.xml é…ç½®"></a>âœ… AndroidManifest.xml é…ç½®</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">package</span>=<span class="string">&quot;org.qtproject.example.activityhandler&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">application</span> <span class="attr">android:label</span>=<span class="string">&quot;JNIExampleApp&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;.CustomActivity1&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;.CustomActivity2&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;.CustomActivity3&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ“Œ-æ³¨æ„äº‹é¡¹"><a href="#ğŸ“Œ-æ³¨æ„äº‹é¡¹" class="headerlink" title="ğŸ“Œ æ³¨æ„äº‹é¡¹"></a>ğŸ“Œ æ³¨æ„äº‹é¡¹</h2><ul>
<li>Java ç±»å¿…é¡»æ”¾åœ¨ <code>android/src/...</code> è·¯å¾„ä¸‹ï¼ŒåŒ…åéœ€ä¸è·¯å¾„ä¸€è‡´ã€‚</li>
<li>Java æ–¹æ³•å¿…é¡»ä¸º <code>public static</code> æ‰èƒ½è¢« <code>QAndroidJniObject::callStaticMethod</code> è°ƒç”¨ã€‚</li>
<li>æ–¹æ³•ç­¾å <code>&quot;()V&quot;</code> è¡¨ç¤ºæ— å‚æ•°ã€æ— è¿”å›å€¼ï¼›ç­¾åå¿…é¡»ä¸ Java æ–¹æ³•åŒ¹é…ã€‚</li>
<li>ä½¿ç”¨ <code>QAndroidJniObject::fromString</code> åˆ›å»º Java å­—ç¬¦ä¸²ã€‚</li>
<li>ä½¿ç”¨ <code>object&lt;jstring&gt;()</code>ã€<code>toString()</code> ç­‰æ–¹å¼è¿›è¡Œç±»å‹è½¬æ¢ã€‚</li>
</ul>
<hr>
<h2 id="ğŸ› -æ„å»ºä¸è¿è¡Œ"><a href="#ğŸ› -æ„å»ºä¸è¿è¡Œ" class="headerlink" title="ğŸ›  æ„å»ºä¸è¿è¡Œ"></a>ğŸ›  æ„å»ºä¸è¿è¡Œ</h2><ol>
<li>æ„å»ºé¡¹ç›®ï¼ˆå»ºè®®å…ˆæ¸…é™¤å†æ„å»ºï¼‰</li>
<li>è¿æ¥ Android è®¾å¤‡</li>
<li>è¿è¡Œé¡¹ç›®ï¼ŒæŸ¥çœ‹ logcat è¾“å‡ºæ˜¯å¦è°ƒç”¨æˆåŠŸ</li>
</ol>
<hr>
<h2 id="ğŸ“š-å»¶ä¼¸é˜…è¯»"><a href="#ğŸ“š-å»¶ä¼¸é˜…è¯»" class="headerlink" title="ğŸ“š å»¶ä¼¸é˜…è¯»"></a>ğŸ“š å»¶ä¼¸é˜…è¯»</h2><ul>
<li><a href="https://doc.qt.io/qt-5/qtandroidextras-index.html">Qt Android Extras å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://developer.android.com/training/articles/perf-jni#native-calls">JNI æ–¹æ³•ç­¾åè¡¨</a></li>
</ul>
]]></content>
      <categories>
        <category>QTå®ä¾‹</category>
      </categories>
      <tags>
        <tag>QT for Android</tag>
        <tag>QT</tag>
      </tags>
  </entry>
  <entry>
    <title>AndroidManifest.xml é…ç½®è¯¦è§£</title>
    <url>/2025/03/03/qt_android_manifest_AndroidManifest%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<blockquote>
<p>ä»¥ä¸‹æ˜¯ Qt for Android åº”ç”¨ä¸­ <code>AndroidManifest.xml</code> æ–‡ä»¶çš„å®Œæ•´é…ç½®åŠè¯¦ç»†æ³¨é‡Šï¼Œé€‚ç”¨äºè‡ªå®šä¹‰æƒé™ã€æ³¨å†Œ Java æ´»åŠ¨ï¼ˆActivityï¼‰ã€å¹¿æ’­æ¥æ”¶å™¨ä»¥åŠåŠ è½½ Qt æ¨¡å—èµ„æºç­‰åœºæ™¯ã€‚</p>
</blockquote>
<hr>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">manifest</span></span></span><br><span class="line"><span class="tag">    <span class="attr">package</span>=<span class="string">&quot;org.qtproject.example.activityhandler&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:versionName</span>=<span class="string">&quot;-- %%INSERT_VERSION_NAME%% --&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:versionCode</span>=<span class="string">&quot;-- %%INSERT_VERSION_CODE%% --&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:installLocation</span>=<span class="string">&quot;auto&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>package</code>ï¼šä½ çš„åº”ç”¨ Java åŒ…å</li>
<li><code>versionName</code>&#x2F;<code>versionCode</code>ï¼šæ„å»ºå·¥å…·è‡ªåŠ¨æ›¿æ¢ç‰ˆæœ¬</li>
<li><code>installLocation</code>ï¼šAPK é»˜è®¤å®‰è£…ä½ç½®ï¼ˆè‡ªåŠ¨åˆ¤æ–­ï¼‰</li>
</ul>
<hr>
<h2 id="ğŸ”-æƒé™å£°æ˜"><a href="#ğŸ”-æƒé™å£°æ˜" class="headerlink" title="ğŸ” æƒé™å£°æ˜"></a>ğŸ” æƒé™å£°æ˜</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.FOREGROUND_SERVICE&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.SYSTEM_ALERT_WINDOW&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.INTERNET&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.ACCESS_NETWORK_STATE&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.CONNECTIVITY_INTERNAL&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.READ_EXTERNAL_STORAGE&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.ACCESS_CHECKIN_PROPERTIES&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å£°æ˜äº†ç½‘ç»œè®¿é—®ã€å­˜å‚¨è®¿é—®ã€ç³»ç»Ÿæ‚¬æµ®çª—ã€åå°æœåŠ¡ç­‰å¤šä¸ªæƒé™</li>
<li><code>MANAGE_EXTERNAL_STORAGE</code> å±äºé«˜æƒé™ï¼ŒAndroid 11+ éœ€ç‰¹æ®Šæˆæƒ</li>
<li><code>CONNECTIVITY_INTERNAL</code> ä¸ºç³»ç»Ÿæƒé™ï¼Œæ™®é€šåº”ç”¨è¯·è°¨æ…ä½¿ç”¨</li>
</ul>
<hr>
<h2 id="ğŸ‘®-è‡ªå®šä¹‰æƒé™"><a href="#ğŸ‘®-è‡ªå®šä¹‰æƒé™" class="headerlink" title="ğŸ‘® è‡ªå®šä¹‰æƒé™"></a>ğŸ‘® è‡ªå®šä¹‰æƒé™</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">permission</span> <span class="attr">android:name</span>=<span class="string">&quot;com.example.myapp.PERMISSION&quot;</span> <span class="attr">android:protectionLevel</span>=<span class="string">&quot;signature&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ç”¨äºä¿æŠ¤æŸäº›ç»„ä»¶ï¼ˆå¦‚å¹¿æ’­ã€æœåŠ¡ï¼‰åªèƒ½è¢«ç­¾ååº”ç”¨è®¿é—®</li>
</ul>
<hr>
<h2 id="ğŸ“±-å±å¹•é€‚é…"><a href="#ğŸ“±-å±å¹•é€‚é…" class="headerlink" title="ğŸ“± å±å¹•é€‚é…"></a>ğŸ“± å±å¹•é€‚é…</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">supports-screens</span> <span class="attr">android:largeScreens</span>=<span class="string">&quot;true&quot;</span> <span class="attr">android:normalScreens</span>=<span class="string">&quot;true&quot;</span> <span class="attr">android:anyDensity</span>=<span class="string">&quot;true&quot;</span> <span class="attr">android:smallScreens</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ§©-åº”ç”¨é…ç½®åŠ-Qt-Activity"><a href="#ğŸ§©-åº”ç”¨é…ç½®åŠ-Qt-Activity" class="headerlink" title="ğŸ§© åº”ç”¨é…ç½®åŠ Qt Activity"></a>ğŸ§© åº”ç”¨é…ç½®åŠ Qt Activity</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">application</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;org.qtproject.qt5.android.bindings.QtApplication&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:hardwareAccelerated</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:label</span>=<span class="string">&quot;-- %%INSERT_APP_NAME%% --&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:extractNativeLibs</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ä½¿ç”¨ Qt å®˜æ–¹çš„ <code>QtApplication</code> ç±»</li>
<li>å¯ç”¨ç¡¬ä»¶åŠ é€Ÿï¼Œè§£å‹ native åº“åˆ°å†…éƒ¨ç›®å½•</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;org.qtproject.example.activityhandler.JBmsActivity&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:launchMode</span>=<span class="string">&quot;singleTop&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:screenOrientation</span>=<span class="string">&quot;unspecified&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:windowSoftInputMode</span>=<span class="string">&quot;adjustResize&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:configChanges</span>=<span class="string">&quot;...&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ä¸» Activityï¼Œä¸º Qt åº”ç”¨å…¥å£</li>
<li>é…ç½®äº† UIã€å­—ä½“ã€è¾“å…¥æ³•ç­‰é‡è½½é€‰é¡¹</li>
<li>å«å¤šæ¡ <code>meta-data</code>ï¼Œå‘ŠçŸ¥ Qt åŠ è½½å“ªäº›åº“å’Œèµ„æº</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.MAIN&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.LAUNCHER&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å°†è¯¥ Activity ä½œä¸º Launcher ä¸»å…¥å£</li>
</ul>
<hr>
<h2 id="ğŸ“‚-Qt-æ‰€éœ€èµ„æºå’Œå‚æ•°"><a href="#ğŸ“‚-Qt-æ‰€éœ€èµ„æºå’Œå‚æ•°" class="headerlink" title="ğŸ“‚ Qt æ‰€éœ€èµ„æºå’Œå‚æ•°"></a>ğŸ“‚ Qt æ‰€éœ€èµ„æºå’Œå‚æ•°</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;android.app.lib_name&quot;</span> <span class="attr">android:value</span>=<span class="string">&quot;-- %%INSERT_APP_LIB_NAME%% --&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;android.app.qt_sources_resource_id&quot;</span> <span class="attr">android:resource</span>=<span class="string">&quot;@array/qt_sources&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;android.app.bundled_libs_resource_id&quot;</span> <span class="attr">android:resource</span>=<span class="string">&quot;@array/bundled_libs&quot;</span>/&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<ul>
<li>æ‰€æœ‰ Qt åº”ç”¨è¿è¡Œæ—¶å¿…é¡»åŒ…å«çš„èµ„æºå¼•ç”¨</li>
<li>ä½¿ç”¨æ„å»ºå·¥å…·åŠ¨æ€æ›¿æ¢</li>
</ul>
<hr>
<h2 id="ğŸŒ—-Splashã€æ ·å¼ã€åå°è¿è¡Œé…ç½®"><a href="#ğŸŒ—-Splashã€æ ·å¼ã€åå°è¿è¡Œé…ç½®" class="headerlink" title="ğŸŒ— Splashã€æ ·å¼ã€åå°è¿è¡Œé…ç½®"></a>ğŸŒ— Splashã€æ ·å¼ã€åå°è¿è¡Œé…ç½®</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;android.app.extract_android_style&quot;</span> <span class="attr">android:value</span>=<span class="string">&quot;minimal&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;android.app.background_running&quot;</span> <span class="attr">android:value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>minimal</code> æ ·å¼æå–é€‚ç”¨äº QMLï¼ˆControls 2ï¼‰æ›´å¿«æ›´è½»é‡</li>
<li>ç¦æ­¢åº”ç”¨åå°è¿è¡Œé¿å…å´©æºƒ</li>
</ul>
<hr>
<h2 id="ğŸ‘¥-å…¶ä»–è‡ªå®šä¹‰-Activity"><a href="#ğŸ‘¥-å…¶ä»–è‡ªå®šä¹‰-Activity" class="headerlink" title="ğŸ‘¥ å…¶ä»–è‡ªå®šä¹‰ Activity"></a>ğŸ‘¥ å…¶ä»–è‡ªå®šä¹‰ Activity</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;.CustomActivity&quot;</span> <span class="attr">android:process</span>=<span class="string">&quot;:custom_activity&quot;</span> <span class="attr">...</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;.WriteToUsbActivity&quot;</span> <span class="attr">android:exported</span>=<span class="string">&quot;false&quot;</span> <span class="attr">...</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>CustomActivity</code> å¯ç”¨äºç‹¬ç«‹è¿›ç¨‹æ‰©å±•åŠŸèƒ½</li>
<li><code>WriteToUsbActivity</code> ç”¨äº USB ç›¸å…³äº¤äº’ï¼Œä¸å¯¼å‡º</li>
</ul>
<hr>
<h2 id="ğŸ“¡-å¯åŠ¨å¹¿æ’­æ¥æ”¶å™¨"><a href="#ğŸ“¡-å¯åŠ¨å¹¿æ’­æ¥æ”¶å™¨" class="headerlink" title="ğŸ“¡ å¯åŠ¨å¹¿æ’­æ¥æ”¶å™¨"></a>ğŸ“¡ å¯åŠ¨å¹¿æ’­æ¥æ”¶å™¨</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">receiver</span> <span class="attr">android:name</span>=<span class="string">&quot;.BootReceiver&quot;</span> <span class="attr">android:enabled</span>=<span class="string">&quot;true&quot;</span> <span class="attr">android:exported</span>=<span class="string">&quot;true&quot;</span> <span class="attr">android:permission</span>=<span class="string">&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">intent-filter</span> <span class="attr">android:priority</span>=<span class="string">&quot;1000&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.BOOT_COMPLETED&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>æ³¨å†Œå¼€æœºå¯åŠ¨å¹¿æ’­ç›‘å¬å™¨</li>
</ul>
<hr>
<h2 id="âœ…-æ³¨æ„äº‹é¡¹"><a href="#âœ…-æ³¨æ„äº‹é¡¹" class="headerlink" title="âœ… æ³¨æ„äº‹é¡¹"></a>âœ… æ³¨æ„äº‹é¡¹</h2><ul>
<li>æ‰€æœ‰è·¯å¾„éœ€ä¸ Java åŒ…ç»“æ„ä¸€è‡´</li>
<li><code>%%INSERT_...%%</code> å­—æ®µç”± Qt æ„å»ºæ—¶è‡ªåŠ¨æ›¿æ¢ï¼Œä¸è¦æ‰‹åŠ¨ä¿®æ”¹</li>
<li>å¦‚æœç›®æ ‡ Android ç‰ˆæœ¬ â‰¥ 11ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨ä½œç”¨åŸŸå­˜å‚¨ + SAF æ›¿ä»£è€çš„å­˜å‚¨æƒé™</li>
</ul>
<hr>
<h1 id="æœ€ç»ˆå®Œæ•´å®ä¾‹ï¼š"><a href="#æœ€ç»ˆå®Œæ•´å®ä¾‹ï¼š" class="headerlink" title="æœ€ç»ˆå®Œæ•´å®ä¾‹ï¼š"></a>æœ€ç»ˆå®Œæ•´å®ä¾‹ï¼š</h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">package</span>=<span class="string">&quot;org.qtproject.example.activityhandler&quot;</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span> <span class="attr">android:versionName</span>=<span class="string">&quot;-- %%INSERT_VERSION_NAME%% --&quot;</span> <span class="attr">android:versionCode</span>=<span class="string">&quot;-- %%INSERT_VERSION_CODE%% --&quot;</span> <span class="attr">android:installLocation</span>=<span class="string">&quot;auto&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--android:sharedUserId=&quot;android.uid.system&quot;--&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- The following comment will be replaced upon deployment with default permissions based on the dependencies of the application.</span></span><br><span class="line"><span class="comment">         Remove the comment if you do not require these default permissions. --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- %%INSERT_PERMISSIONS --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- The following comment will be replaced upon deployment with default features based on the dependencies of the application.</span></span><br><span class="line"><span class="comment">         Remove the comment if you do not require these default features. --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- %%INSERT_FEATURES --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.FOREGROUND_SERVICE&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.SYSTEM_ALERT_WINDOW&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.INTERNET&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.ACCESS_NETWORK_STATE&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.CONNECTIVITY_INTERNAL&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.READ_EXTERNAL_STORAGE&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">permission</span> <span class="attr">android:name</span>=<span class="string">&quot;com.example.myapp.PERMISSION&quot;</span> <span class="attr">android:protectionLevel</span>=<span class="string">&quot;signature&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">supports-screens</span> <span class="attr">android:largeScreens</span>=<span class="string">&quot;true&quot;</span> <span class="attr">android:normalScreens</span>=<span class="string">&quot;true&quot;</span> <span class="attr">android:anyDensity</span>=<span class="string">&quot;true&quot;</span> <span class="attr">android:smallScreens</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">application</span> <span class="attr">android:hardwareAccelerated</span>=<span class="string">&quot;true&quot;</span> <span class="attr">android:name</span>=<span class="string">&quot;org.qtproject.qt5.android.bindings.QtApplication&quot;</span> <span class="attr">android:label</span>=<span class="string">&quot;-- %%INSERT_APP_NAME%% --&quot;</span> <span class="attr">android:extractNativeLibs</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:configChanges</span>=<span class="string">&quot;orientation|uiMode|screenLayout|screenSize|smallestScreenSize|layoutDirection|locale|fontScale|keyboard|keyboardHidden|navigation|mcc|mnc|density&quot;</span> <span class="attr">android:name</span>=<span class="string">&quot;org.qtproject.example.activityhandler.JBmsActivity&quot;</span> <span class="attr">android:label</span>=<span class="string">&quot;-- %%INSERT_APP_NAME%% --&quot;</span> <span class="attr">android:screenOrientation</span>=<span class="string">&quot;unspecified&quot;</span> <span class="attr">android:launchMode</span>=<span class="string">&quot;singleTop&quot;</span> <span class="attr">android:windowSoftInputMode</span>=<span class="string">&quot;adjustResize&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.MAIN&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.LAUNCHER&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- Application arguments --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- meta-data android:name=&quot;android.app.arguments&quot; android:value=&quot;arg1 arg2 arg3&quot;/ --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- Application arguments --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;android.app.lib_name&quot;</span> <span class="attr">android:value</span>=<span class="string">&quot;-- %%INSERT_APP_LIB_NAME%% --&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;android.app.qt_sources_resource_id&quot;</span> <span class="attr">android:resource</span>=<span class="string">&quot;@array/qt_sources&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;android.app.repository&quot;</span> <span class="attr">android:value</span>=<span class="string">&quot;default&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;android.app.qt_libs_resource_id&quot;</span> <span class="attr">android:resource</span>=<span class="string">&quot;@array/qt_libs&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;android.app.bundled_libs_resource_id&quot;</span> <span class="attr">android:resource</span>=<span class="string">&quot;@array/bundled_libs&quot;</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- Deploy Qt libs as part of package --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;android.app.bundle_local_qt_libs&quot;</span> <span class="attr">android:value</span>=<span class="string">&quot;-- %%BUNDLE_LOCAL_QT_LIBS%% --&quot;</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- Run with local libs --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;android.app.use_local_qt_libs&quot;</span> <span class="attr">android:value</span>=<span class="string">&quot;-- %%USE_LOCAL_QT_LIBS%% --&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;android.app.libs_prefix&quot;</span> <span class="attr">android:value</span>=<span class="string">&quot;/data/local/tmp/qt/&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;android.app.load_local_libs_resource_id&quot;</span> <span class="attr">android:resource</span>=<span class="string">&quot;@array/load_local_libs&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;android.app.load_local_jars&quot;</span> <span class="attr">android:value</span>=<span class="string">&quot;-- %%INSERT_LOCAL_JARS%% --&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;android.app.static_init_classes&quot;</span> <span class="attr">android:value</span>=<span class="string">&quot;-- %%INSERT_INIT_CLASSES%% --&quot;</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- Used to specify custom system library path to run with local system libs --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- &lt;meta-data android:name=&quot;android.app.system_libs_prefix&quot; android:value=&quot;/system/lib/&quot;/&gt; --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--  Messages maps --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:value</span>=<span class="string">&quot;@string/ministro_not_found_msg&quot;</span> <span class="attr">android:name</span>=<span class="string">&quot;android.app.ministro_not_found_msg&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:value</span>=<span class="string">&quot;@string/ministro_needed_msg&quot;</span> <span class="attr">android:name</span>=<span class="string">&quot;android.app.ministro_needed_msg&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:value</span>=<span class="string">&quot;@string/fatal_error_msg&quot;</span> <span class="attr">android:name</span>=<span class="string">&quot;android.app.fatal_error_msg&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:value</span>=<span class="string">&quot;@string/unsupported_android_version&quot;</span> <span class="attr">android:name</span>=<span class="string">&quot;android.app.unsupported_android_version&quot;</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--  Messages maps --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- Splash screen --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- Orientation-specific (portrait/landscape) data is checked first. If not available for current orientation,</span></span><br><span class="line"><span class="comment">                 then android.app.splash_screen_drawable. For best results, use together with splash_screen_sticky and</span></span><br><span class="line"><span class="comment">                 use hideSplashScreen() with a fade-out animation from Qt Android Extras to hide the splash screen when you</span></span><br><span class="line"><span class="comment">                 are done populating your window with content. --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- meta-data android:name=&quot;android.app.splash_screen_drawable_portrait&quot; android:resource=&quot;@drawable/logo_portrait&quot; / --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- meta-data android:name=&quot;android.app.splash_screen_drawable_landscape&quot; android:resource=&quot;@drawable/logo_landscape&quot; / --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- meta-data android:name=&quot;android.app.splash_screen_drawable&quot; android:resource=&quot;@drawable/logo&quot;/ --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- meta-data android:name=&quot;android.app.splash_screen_sticky&quot; android:value=&quot;true&quot;/ --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- Splash screen --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- Background running --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- Warning: changing this value to true may cause unexpected crashes if the</span></span><br><span class="line"><span class="comment">                          application still try to draw after</span></span><br><span class="line"><span class="comment">                          &quot;applicationStateChanged(Qt::ApplicationSuspended)&quot;</span></span><br><span class="line"><span class="comment">                          signal is sent! --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;android.app.background_running&quot;</span> <span class="attr">android:value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- Background running --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- auto screen scale factor --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;android.app.auto_screen_scale_factor&quot;</span> <span class="attr">android:value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- auto screen scale factor --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- extract android style --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- available android:values :</span></span><br><span class="line"><span class="comment">                * default - In most cases this will be the same as &quot;full&quot;, but it can also be something else if needed, e.g., for compatibility reasons</span></span><br><span class="line"><span class="comment">                * full - useful QWidget &amp; Quick Controls 1 apps</span></span><br><span class="line"><span class="comment">                * minimal - useful for Quick Controls 2 apps, it is much faster than &quot;full&quot;</span></span><br><span class="line"><span class="comment">                * none - useful for apps that don&#x27;t use any of the above Qt modules</span></span><br><span class="line"><span class="comment">                --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;android.app.extract_android_style&quot;</span> <span class="attr">android:value</span>=<span class="string">&quot;minimal&quot;</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- extract android style --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:process</span>=<span class="string">&quot;:custom_activity&quot;</span> <span class="attr">android:name</span>=<span class="string">&quot;.CustomActivity&quot;</span> <span class="attr">android:label</span>=<span class="string">&quot;-- %%INSERT_APP_NAME%% --&quot;</span> <span class="attr">android:screenOrientation</span>=<span class="string">&quot;unspecified&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- android:process=&quot;:qt&quot; is needed to force the service to run on a separate process than the Activity --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;android.app.lib_name&quot;</span> <span class="attr">android:value</span>=<span class="string">&quot;-- %%INSERT_APP_LIB_NAME%% --&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;.WriteToUsbActivity&quot;</span> <span class="attr">android:exported</span>=<span class="string">&quot;false&quot;</span> <span class="attr">android:label</span>=<span class="string">&quot;-- %%INSERT_APP_NAME%% --&quot;</span> <span class="attr">android:screenOrientation</span>=<span class="string">&quot;unspecified&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- For adding service(s) please check: https://wiki.qt.io/AndroidServices --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">receiver</span> <span class="attr">android:name</span>=<span class="string">&quot;.BootReceiver&quot;</span> <span class="attr">android:enabled</span>=<span class="string">&quot;true&quot;</span> <span class="attr">android:exported</span>=<span class="string">&quot;true&quot;</span> <span class="attr">android:permission</span>=<span class="string">&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">intent-filter</span> <span class="attr">android:priority</span>=<span class="string">&quot;1000&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.BOOT_COMPLETED&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.ACCESS_CHECKIN_PROPERTIES&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>QTå®ä¾‹</category>
      </categories>
      <tags>
        <tag>QT for Android</tag>
        <tag>QT</tag>
      </tags>
  </entry>
  <entry>
    <title>Qt ä¼ ç»Ÿçº¿ç¨‹ä¸çº¿ç¨‹æ± æœºåˆ¶å¯¹æ¯”æ€»ç»“</title>
    <url>/2025/06/14/qt_%E4%BC%A0%E7%BB%9F%E7%BA%BF%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%B7%AE%E5%BC%82%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æ–‡é˜è¿°äº†ä¼ ç»Ÿçº¿ç¨‹å’Œçº¿ç¨‹æ± åœ¨åº”ç”¨åœºæ™¯å’Œç”¨æ³•ä¸Šçš„åŒºåˆ«å’Œä½¿ç”¨è¦ç‚¹ã€‚</p>
</blockquote>
<hr>
<h2 id="ä¸€ã€æ ¸å¿ƒåŒºåˆ«æ€»è§ˆ"><a href="#ä¸€ã€æ ¸å¿ƒåŒºåˆ«æ€»è§ˆ" class="headerlink" title="ä¸€ã€æ ¸å¿ƒåŒºåˆ«æ€»è§ˆ"></a>ä¸€ã€æ ¸å¿ƒåŒºåˆ«æ€»è§ˆ</h2><table>
<thead>
<tr>
<th>å¯¹æ¯”é¡¹</th>
<th>QThread ä¼ ç»Ÿçº¿ç¨‹</th>
<th>QThreadPool + QRunnable çº¿ç¨‹æ± </th>
</tr>
</thead>
<tbody><tr>
<td>å¯åŠ¨æ–¹å¼</td>
<td><code>thread-&gt;start()</code></td>
<td><code>threadPool-&gt;start(runnable)</code></td>
</tr>
<tr>
<td>æ‰§è¡Œå…¥å£</td>
<td>é‡å†™ <code>QThread::run()</code></td>
<td>å®ç° <code>QRunnable::run()</code></td>
</tr>
<tr>
<td>æ˜¯å¦ä¸ºå­çº¿ç¨‹å¯¹è±¡æœ¬ä½“</td>
<td>âœ… <code>QThread</code> æ˜¯å­çº¿ç¨‹</td>
<td>âŒ <code>QRunnable</code> æ˜¯ä¸»çº¿ç¨‹å¯¹è±¡ï¼Œä»… run() å±äºå­çº¿ç¨‹</td>
</tr>
<tr>
<td>æ˜¯å¦æœ‰äº‹ä»¶å¾ªç¯</td>
<td>âœ”ï¸ å¯å¯ç”¨ï¼ˆé€šè¿‡ <code>exec()</code>ï¼‰</td>
<td>âŒ æ— äº‹ä»¶å¾ªç¯</td>
</tr>
<tr>
<td>æ˜¯å¦æ”¯æŒ moveToThread</td>
<td>âœ”ï¸ å¯ç»‘å®š <code>QObject</code> å¯¹è±¡</td>
<td>âŒ ä¸æ”¯æŒ</td>
</tr>
<tr>
<td>æ˜¯å¦æ”¯æŒä¿¡å·æ§½æœºåˆ¶</td>
<td>âœ”ï¸ å¯è·¨çº¿ç¨‹é€šä¿¡</td>
<td>âŒ é»˜è®¤ä¸æ”¯æŒï¼ˆéœ€æ‰‹åŠ¨ hackï¼‰</td>
</tr>
<tr>
<td>é€‚åˆç”¨é€”</td>
<td>é•¿æœŸå­˜åœ¨ã€å¤æ‚æ§åˆ¶ã€åè®®é€šä¿¡</td>
<td>è½»é‡ä»»åŠ¡ã€çŸ­æ—¶æ‰¹å¤„ç†</td>
</tr>
</tbody></table>
<hr>
<h2 id="äºŒã€QThread-ä¼ ç»Ÿçº¿ç¨‹ç”¨æ³•"><a href="#äºŒã€QThread-ä¼ ç»Ÿçº¿ç¨‹ç”¨æ³•" class="headerlink" title="äºŒã€QThread ä¼ ç»Ÿçº¿ç¨‹ç”¨æ³•"></a>äºŒã€QThread ä¼ ç»Ÿçº¿ç¨‹ç”¨æ³•</h2><h3 id="1-åˆ›å»ºé€»è¾‘å¯¹è±¡ä¸çº¿ç¨‹"><a href="#1-åˆ›å»ºé€»è¾‘å¯¹è±¡ä¸çº¿ç¨‹" class="headerlink" title="1. åˆ›å»ºé€»è¾‘å¯¹è±¡ä¸çº¿ç¨‹"></a>1. åˆ›å»ºé€»è¾‘å¯¹è±¡ä¸çº¿ç¨‹</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">Worker* worker = <span class="keyword">new</span> Worker;  <span class="comment">//ä»»åŠ¡å¯¹è±¡ï¼Œå¯ä»¥è¢«ç»‘å®šåˆ°å­çº¿ç¨‹çš„é€»è¾‘å¯¹è±¡ï¼Œç”¨äºæ‰§è¡Œå®é™…ä»»åŠ¡</span></span><br><span class="line">QThread* thread = <span class="keyword">new</span> QThread;  <span class="comment">//å­çº¿ç¨‹å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿ç§»å¯¹è±¡</span></span><br><span class="line">worker-&gt;<span class="built_in">moveToThread</span>(thread); <span class="comment">//å°†ä»»åŠ¡å¯¹è±¡è¿ç§»è‡³å­çº¿ç¨‹å¯¹è±¡ï¼Œworkerå¯ä»¥ä¸ºåˆ›å»ºçº¿ç¨‹çš„thiså¯¹è±¡æœ¬èº«</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿¡å·æ§½è¿æ¥ï¼š</span></span><br><span class="line">	<span class="comment">//å½“çº¿ç¨‹å¯åŠ¨æ—¶è‡ªåŠ¨è°ƒç”¨å·¥ä½œå¯¹è±¡çš„ä»»åŠ¡å‡½æ•° doWork()</span></span><br><span class="line"><span class="built_in">connect</span>(thread, &amp;QThread::started, worker, &amp;Worker::doWork); </span><br><span class="line">	<span class="comment">//å½“å·¥ä½œå¯¹è±¡å‘å‡º finished ä¿¡å·æ—¶ï¼Œé€šçŸ¥çº¿ç¨‹é€€å‡ºäº‹ä»¶å¾ªç¯</span></span><br><span class="line"><span class="built_in">connect</span>(worker, &amp;Worker::finished, thread, &amp;QThread::quit);</span><br><span class="line">	<span class="comment">//å½“çº¿ç¨‹é€€å‡ºåï¼Œé”€æ¯ QThread å¯¹è±¡</span></span><br><span class="line"><span class="built_in">connect</span>(thread, &amp;QThread::finished, thread, &amp;QThread::deleteLater);</span><br><span class="line">	<span class="comment">//å½“å·¥ä½œå®Œæˆï¼Œè‡ªåŠ¨é”€æ¯ worker å¯¹è±¡</span></span><br><span class="line"><span class="built_in">connect</span>(worker, &amp;Worker::finished, worker, &amp;QObject::deleteLater);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line">thread-&gt;<span class="built_in">start</span>();</span><br></pre></td></tr></table></figure>

<p><code>QThread</code> æ˜¯ Qt æ¡†æ¶ä¸­ç”¨äº<strong>åˆ›å»ºå’Œç®¡ç†å­çº¿ç¨‹</strong>çš„ç±»ï¼Œæœ¬è´¨ä¸Šæ˜¯<strong>ä¸€ä¸ªçº¿ç¨‹æ§åˆ¶å™¨</strong>ã€‚</p>
<ul>
<li>å®ƒè‡ªèº«ä¸æ˜¯ç”¨æ¥å†™ä»»åŠ¡é€»è¾‘çš„</li>
<li>ä¹Ÿä¸å»ºè®®é‡å†™ <code>QThread::run()</code> æ¥åšäº‹</li>
<li>æ¨èåšæ³•æ˜¯ï¼š<strong>å°†é€»è¾‘ç±»ï¼ˆQObjectï¼‰é€šè¿‡ <code>moveToThread()</code> ç§»åˆ° <code>QThread</code> ä¸­è¿è¡Œ</strong></li>
</ul>
<h3 id="âœ…-ç‰¹ç‚¹"><a href="#âœ…-ç‰¹ç‚¹" class="headerlink" title="âœ… ç‰¹ç‚¹"></a>âœ… ç‰¹ç‚¹</h3><ul>
<li>é€»è¾‘å¯¹è±¡å¯ä»¥ç”¨ <code>moveToThread()</code> è¿ç§»è‡³çº¿ç¨‹ä¸­è¿è¡Œ</li>
<li>æ”¯æŒå®Œæ•´äº‹ä»¶å¾ªç¯ï¼šå®šæ—¶å™¨ã€ä¿¡å·æ§½ã€å¼‚æ­¥æ“ä½œ</li>
<li>é€‚åˆé•¿æœŸä¿æŒè¿è¡Œã€çŠ¶æ€é©±åŠ¨çš„ä»»åŠ¡ï¼ˆå¦‚åè®®è¿æ¥ã€è®¾å¤‡é€šè®¯ï¼‰</li>
</ul>
<hr>
<h2 id="ä¸‰ã€çº¿ç¨‹æ± -QThreadPool-QRunnable-æœºåˆ¶"><a href="#ä¸‰ã€çº¿ç¨‹æ± -QThreadPool-QRunnable-æœºåˆ¶" class="headerlink" title="ä¸‰ã€çº¿ç¨‹æ±  QThreadPool + QRunnable æœºåˆ¶"></a>ä¸‰ã€çº¿ç¨‹æ±  QThreadPool + QRunnable æœºåˆ¶</h2><h3 id="âœ…-åŸºæœ¬ç»“æ„"><a href="#âœ…-åŸºæœ¬ç»“æ„" class="headerlink" title="âœ… åŸºæœ¬ç»“æ„"></a>âœ… åŸºæœ¬ç»“æ„</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyTask</span> : <span class="keyword">public</span> QRunnable &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">run</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è¿™é‡Œçš„ä»£ç å°†åœ¨çº¿ç¨‹æ± ä¸­æŸä¸ªçº¿ç¨‹æ‰§è¡Œ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">QThreadPool::<span class="built_in">globalInstance</span>()-&gt;<span class="built_in">start</span>(<span class="keyword">new</span> MyTask);</span><br></pre></td></tr></table></figure>

<h3 id="âœ…-ç‰¹ç‚¹-1"><a href="#âœ…-ç‰¹ç‚¹-1" class="headerlink" title="âœ… ç‰¹ç‚¹"></a>âœ… ç‰¹ç‚¹</h3><ul>
<li><p>æ— äº‹ä»¶å¾ªç¯ï¼Œä¸èƒ½ä½¿ç”¨ä¿¡å·æ§½ã€moveToThread</p>
</li>
<li><p>ä»»åŠ¡å‡½æ•° run() è¿è¡Œäºå­çº¿ç¨‹</p>
</li>
<li><p>é QObject ç±»ï¼Œä»…é€‚åˆä¸€æ¬¡æ€§çŸ­ä»»åŠ¡å¤„ç†</p>
</li>
</ul>
<h3 id="ğŸ“Œé‡ç‚¹"><a href="#ğŸ“Œé‡ç‚¹" class="headerlink" title="ğŸ“Œé‡ç‚¹"></a>ğŸ“Œé‡ç‚¹</h3><ul>
<li><p>run()å‡½æ•°å†…éƒ¨æ‰å±äºå­çº¿ç¨‹ï¼ŒMyTaskæœ¬èº«å¹¶ä¸å±äºå­çº¿ç¨‹ï¼</p>
</li>
<li><p>run()å‡½æ•°å†…éƒ¨è°ƒç”¨ä»»ä½•å±äºMyTaskæ„é€ å‡½æ•°å†…æ„å»ºçš„å¯¹è±¡ï¼Œéƒ½å±äºéæ³•è®¿é—®ï¼</p>
</li>
<li><p>run()å‡½æ•°å†…éƒ¨å¯ä»¥è°ƒç”¨MyTask.hå£°æ˜çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Œè¿™æ˜¯è¢«å…è®¸çš„ï¼</p>
</li>
</ul>
<hr>
<h2 id="å››ã€ä¸»çº¿ç¨‹å¯¹è±¡çš„è®¿é—®ä¸-QMetaObject-invokeMethod"><a href="#å››ã€ä¸»çº¿ç¨‹å¯¹è±¡çš„è®¿é—®ä¸-QMetaObject-invokeMethod" class="headerlink" title="å››ã€ä¸»çº¿ç¨‹å¯¹è±¡çš„è®¿é—®ä¸ QMetaObject::invokeMethod"></a>å››ã€ä¸»çº¿ç¨‹å¯¹è±¡çš„è®¿é—®ä¸ QMetaObject::invokeMethod</h2><h3 id="âœ…-è¯­æ³•ç»“æ„"><a href="#âœ…-è¯­æ³•ç»“æ„" class="headerlink" title="âœ… è¯­æ³•ç»“æ„"></a>âœ… è¯­æ³•ç»“æ„</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">QMetaObject::<span class="built_in">invokeMethod</span>(mainObj, <span class="string">&quot;updateUI&quot;</span>, Qt::QueuedConnection, <span class="built_in">Q_ARG</span>(QString, result));</span><br></pre></td></tr></table></figure>

<h3 id="âœ…-å‚æ•°è§£æ"><a href="#âœ…-å‚æ•°è§£æ" class="headerlink" title="âœ… å‚æ•°è§£æ"></a>âœ… å‚æ•°è§£æ</h3><table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><code>mainObj</code></td>
<td>ä¸»çº¿ç¨‹ä¸­çš„ QObject æ´¾ç”Ÿå¯¹è±¡æŒ‡é’ˆ</td>
</tr>
<tr>
<td><code>&quot;updateUI&quot;</code></td>
<td>è¦è°ƒç”¨çš„æ§½å‡½æ•°åï¼ˆå¿…é¡»æ˜¯ slot æˆ– Q_INVOKABLEï¼‰</td>
</tr>
<tr>
<td><code>Qt::QueuedConnection</code></td>
<td>è·¨çº¿ç¨‹æ’é˜Ÿæ‰§è¡Œ</td>
</tr>
<tr>
<td><code>Q_ARG(QString, result)</code></td>
<td>å‚æ•°ç±»å‹å’Œå€¼å°è£…</td>
</tr>
</tbody></table>
<h3 id="âœ…-æ‰§è¡ŒåŸç†"><a href="#âœ…-æ‰§è¡ŒåŸç†" class="headerlink" title="âœ… æ‰§è¡ŒåŸç†"></a>âœ… æ‰§è¡ŒåŸç†</h3><ul>
<li>å­çº¿ç¨‹è°ƒç”¨ <code>invokeMethod</code></li>
<li>Qt æ£€æµ‹ <code>mainObj</code> æ‰€å±çº¿ç¨‹ï¼ˆä¸»çº¿ç¨‹ï¼‰</li>
<li>å°†è°ƒç”¨è¯·æ±‚æ”¾å…¥ <code>mainObj</code> æ‰€å±çº¿ç¨‹çš„äº‹ä»¶é˜Ÿåˆ—</li>
<li>æœ€ç»ˆç”±ä¸»çº¿ç¨‹äº‹ä»¶å¾ªç¯æ‰§è¡Œæ­¤æ–¹æ³•</li>
</ul>
<h3 id="âœ…-ç¤ºä¾‹"><a href="#âœ…-ç¤ºä¾‹" class="headerlink" title="âœ… ç¤ºä¾‹"></a>âœ… ç¤ºä¾‹</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyTask</span> : <span class="keyword">public</span> QRunnable &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MyTask</span>(QObject* target) : <span class="built_in">mainObj</span>(target) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">run</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        QMetaObject::<span class="built_in">invokeMethod</span>(mainObj, <span class="string">&quot;updateUI&quot;</span>,</span><br><span class="line">                                  Qt::QueuedConnection,</span><br><span class="line">                                  <span class="built_in">Q_ARG</span>(QString, <span class="string">&quot;ä»»åŠ¡å®Œæˆ&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    QObject* mainObj;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="ğŸ“Œé‡ç‚¹-1"><a href="#ğŸ“Œé‡ç‚¹-1" class="headerlink" title="ğŸ“Œé‡ç‚¹"></a>ğŸ“Œé‡ç‚¹</h3><ul>
<li>mainObjå±äºä¸»çº¿ç¨‹ï¼ŒQMetaObject::invokeMethodå­˜åœ¨äºå­çº¿ç¨‹ä»…å£°æ˜äº†mainObjå¯¹è±¡ï¼Œä¸å±äºç›´æ¥è°ƒç”¨ï¼Œå¹¶ä¸ä¼šè§¦å‘æŠ¥é”™ã€‚</li>
<li>åœ¨ <code>run()</code> ä¸­ä½ åªæ˜¯ä½¿ç”¨å®ƒçš„åœ°å€è°ƒç”¨ <code>invokeMethod</code>ï¼Œå®é™…æ‰§è¡Œä»åœ¨ä¸»çº¿ç¨‹ã€‚</li>
</ul>
<hr>
<h2 id="äº”ã€çº¿ç¨‹å®‰å…¨æ€§è¯´æ˜"><a href="#äº”ã€çº¿ç¨‹å®‰å…¨æ€§è¯´æ˜" class="headerlink" title="äº”ã€çº¿ç¨‹å®‰å…¨æ€§è¯´æ˜"></a>äº”ã€çº¿ç¨‹å®‰å…¨æ€§è¯´æ˜</h2><h3 id="âœ…-å­çº¿ç¨‹ä¸­å¯å®‰å…¨æ“ä½œï¼š"><a href="#âœ…-å­çº¿ç¨‹ä¸­å¯å®‰å…¨æ“ä½œï¼š" class="headerlink" title="âœ… å­çº¿ç¨‹ä¸­å¯å®‰å…¨æ“ä½œï¼š"></a>âœ… å­çº¿ç¨‹ä¸­å¯å®‰å…¨æ“ä½œï¼š</h3><ul>
<li>å±€éƒ¨åŸºæœ¬ç±»å‹å˜é‡ï¼ˆint, float, QString ç­‰ï¼‰</li>
<li>ä¸ä¸å…¶ä»–çº¿ç¨‹å…±äº«çš„ç§æœ‰æ•°æ®</li>
</ul>
<h3 id="âš ï¸-éœ€è¦åŠ é”çš„æƒ…å†µï¼š"><a href="#âš ï¸-éœ€è¦åŠ é”çš„æƒ…å†µï¼š" class="headerlink" title="âš ï¸ éœ€è¦åŠ é”çš„æƒ…å†µï¼š"></a>âš ï¸ éœ€è¦åŠ é”çš„æƒ…å†µï¼š</h3><ul>
<li>å…¨å±€å˜é‡</li>
<li>å¤šçº¿ç¨‹å…±äº«çš„æˆå‘˜å˜é‡ï¼ˆstaticã€å¼•ç”¨ï¼‰</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">mutex.<span class="built_in">lock</span>();</span><br><span class="line">sharedData += <span class="number">1</span>;</span><br><span class="line">mutex.<span class="built_in">unlock</span>();</span><br></pre></td></tr></table></figure>

<h3 id="âŒ-ä¸¥ç¦å­çº¿ç¨‹ä¸­ç›´æ¥æ“ä½œä¸»çº¿ç¨‹-UIï¼š"><a href="#âŒ-ä¸¥ç¦å­çº¿ç¨‹ä¸­ç›´æ¥æ“ä½œä¸»çº¿ç¨‹-UIï¼š" class="headerlink" title="âŒ ä¸¥ç¦å­çº¿ç¨‹ä¸­ç›´æ¥æ“ä½œä¸»çº¿ç¨‹ UIï¼š"></a>âŒ ä¸¥ç¦å­çº¿ç¨‹ä¸­ç›´æ¥æ“ä½œä¸»çº¿ç¨‹ UIï¼š</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">ui-&gt;label-&gt;<span class="built_in">setText</span>(<span class="string">&quot;XXX&quot;</span>);  <span class="comment">// âŒ ä¸å…è®¸ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰</span></span><br></pre></td></tr></table></figure>

<p>è¯·ä½¿ç”¨ <code>invokeMethod</code> æˆ–ä¿¡å·æ§½è·¨çº¿ç¨‹é€šçŸ¥ä¸»çº¿ç¨‹æ“ä½œ UIã€‚</p>
<hr>
<h2 id="å…­ã€ä¿¡å·æ§½-è·¨çº¿ç¨‹é€šä¿¡-è¦ç‚¹å£°æ˜"><a href="#å…­ã€ä¿¡å·æ§½-è·¨çº¿ç¨‹é€šä¿¡-è¦ç‚¹å£°æ˜" class="headerlink" title="å…­ã€ä¿¡å·æ§½ è·¨çº¿ç¨‹é€šä¿¡ è¦ç‚¹å£°æ˜"></a>å…­ã€ä¿¡å·æ§½ è·¨çº¿ç¨‹é€šä¿¡ è¦ç‚¹å£°æ˜</h2><h3 id="âœ…-è·¨çº¿ç¨‹é€šä¿¡æ—¶ï¼Œé¡»ä½¿ç”¨-Qt-QueuedConnection-å¼ºåˆ¶æ’é˜Ÿè°ƒç”¨æ§½å‡½æ•°"><a href="#âœ…-è·¨çº¿ç¨‹é€šä¿¡æ—¶ï¼Œé¡»ä½¿ç”¨-Qt-QueuedConnection-å¼ºåˆ¶æ’é˜Ÿè°ƒç”¨æ§½å‡½æ•°" class="headerlink" title="âœ… è·¨çº¿ç¨‹é€šä¿¡æ—¶ï¼Œé¡»ä½¿ç”¨ Qt::QueuedConnection å¼ºåˆ¶æ’é˜Ÿè°ƒç”¨æ§½å‡½æ•°"></a>âœ… è·¨çº¿ç¨‹é€šä¿¡æ—¶ï¼Œé¡»ä½¿ç”¨ Qt::QueuedConnection å¼ºåˆ¶æ’é˜Ÿè°ƒç”¨æ§½å‡½æ•°</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">connect(worker, &amp;Worker::resultReady,</span><br><span class="line">        mainWindow, &amp;MainWindow::updateUI,</span><br><span class="line">        Qt::QueuedConnection);  // å¼ºåˆ¶ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œ</span><br></pre></td></tr></table></figure>

<h3 id="âš ï¸-ä¸ºä»€ä¹ˆéœ€è¦å¼ºåˆ¶æ’é˜Ÿï¼š"><a href="#âš ï¸-ä¸ºä»€ä¹ˆéœ€è¦å¼ºåˆ¶æ’é˜Ÿï¼š" class="headerlink" title="âš ï¸ ä¸ºä»€ä¹ˆéœ€è¦å¼ºåˆ¶æ’é˜Ÿï¼š"></a>âš ï¸ ä¸ºä»€ä¹ˆéœ€è¦å¼ºåˆ¶æ’é˜Ÿï¼š</h3><ul>
<li><code>Qt::AutoConnection</code> é»˜è®¤è¡Œä¸ºä¸ç¡®å®šï¼šçº¿ç¨‹æœªå¯åŠ¨æˆ–è¿ç§»å¤±è´¥æ—¶ï¼Œå¯èƒ½æ§½å‡½æ•°ä»åœ¨é”™è¯¯çº¿ç¨‹ä¸­æ‰§è¡Œ</li>
<li><code>Qt::QueuedConnection</code> å¯ç¡®ä¿æ§½å‡½æ•°<strong>æ€»æ˜¯åœ¨çº¿ç¨‹å½’å±å¯¹è±¡çš„çº¿ç¨‹ä¸­æ‰§è¡Œ</strong>ï¼ˆå¦‚ä¸»çº¿ç¨‹ï¼‰</li>
<li>é¿å…å´©æºƒã€æ­»é”ã€UI çº¿ç¨‹è®¿é—®å†²çª</li>
</ul>
<h3 id="âœ…-å¸¸è§è¿æ¥ç±»å‹è§£é‡Š"><a href="#âœ…-å¸¸è§è¿æ¥ç±»å‹è§£é‡Š" class="headerlink" title="âœ… å¸¸è§è¿æ¥ç±»å‹è§£é‡Š"></a>âœ… å¸¸è§è¿æ¥ç±»å‹è§£é‡Š</h3><table>
<thead>
<tr>
<th>è¿æ¥ç±»å‹</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td><code>Qt::AutoConnection</code></td>
<td>è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦è·¨çº¿ç¨‹ï¼Œé»˜è®¤å€¼ï¼ˆâš ï¸ä¸å®‰å…¨ï¼‰</td>
</tr>
<tr>
<td><code>Qt::DirectConnection</code></td>
<td>ç«‹å³åœ¨å½“å‰çº¿ç¨‹è°ƒç”¨æ§½å‡½æ•°ï¼ˆâš ï¸è·¨çº¿ç¨‹é£é™©ï¼‰</td>
</tr>
<tr>
<td><code>Qt::QueuedConnection</code></td>
<td>æŠ•é€’åˆ°ç›®æ ‡çº¿ç¨‹äº‹ä»¶é˜Ÿåˆ—æ‰§è¡Œï¼ˆâœ”ï¸æ¨èï¼‰</td>
</tr>
<tr>
<td><code>Qt::BlockingQueuedConnection</code></td>
<td>é˜»å¡å½“å‰çº¿ç¨‹ç›´åˆ°æ§½å‡½æ•°æ‰§è¡Œå®Œï¼ˆâš ï¸å®¹æ˜“æ­»é”ï¼‰</td>
</tr>
<tr>
<td><code>Qt::UniqueConnection</code></td>
<td>é˜²æ­¢é‡å¤è¿æ¥ï¼Œå¯ä¸å…¶ä»–è¿æ¥ç±»å‹ç»„åˆä½¿ç”¨</td>
</tr>
</tbody></table>
<hr>
<h2 id="ä¸ƒã€æ€»ç»“å»ºè®®"><a href="#ä¸ƒã€æ€»ç»“å»ºè®®" class="headerlink" title="ä¸ƒã€æ€»ç»“å»ºè®®"></a>ä¸ƒã€æ€»ç»“å»ºè®®</h2><ul>
<li><strong>åè®®æ¥å…¥ã€ä¸²å£é€šä¿¡ã€é•¿æœŸä»»åŠ¡ï¼š</strong> æ¨èä½¿ç”¨ <code>QThread + QObject + moveToThread</code> æ¨¡å¼</li>
<li><strong>é«˜å¹¶å‘çŸ­æ—¶ä»»åŠ¡ï¼Œå¦‚æ•°æ®å—è®¡ç®—ã€å›¾åƒå¤„ç†ï¼š</strong> æ¨èä½¿ç”¨ <code>QThreadPool + QRunnable</code></li>
<li>**è·¨çº¿ç¨‹é€šä¿¡ï¼š**ç»Ÿä¸€ç”¨ <code>ä¿¡å·æ§½</code> æˆ– <code>QMetaObject::invokeMethod(Qt::QueuedConnection)</code></li>
</ul>
<p>äºŒè€…å¯ä»¥åœ¨é¡¹ç›®ä¸­æ··åˆä½¿ç”¨ï¼ŒæŒ‰ç…§ä»»åŠ¡ç‰¹ç‚¹çµæ´»é€‰å‹ã€‚</p>
]]></content>
      <categories>
        <category>QT_çŸ¥è¯†æ€»ç»“</category>
      </categories>
      <tags>
        <tag>QT</tag>
        <tag>çº¿ç¨‹</tag>
      </tags>
  </entry>
</search>
